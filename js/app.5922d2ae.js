(function(){"use strict";var e={7996:function(e,t,a){a(7658);var r=a(144),s=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},n=[],o=a(1001),l={},i=(0,o.Z)(l,s,n,!1,null,null,null),c=i.exports,d=a(1705),u=a(6808);r.ZP.use(d.Z);var m=new d.Z({lang:{locales:{es:u.Z},current:"es"},theme:{options:{customProperties:!0},themes:{light:{primary:"#5e151d",secondary:"#606060",accent:"#82B1FF",error:"#BC3030",info:"#167DCF",success:"#2FA434",warning:"#FFBF00"}},typography:{fontFamily:"Roboto"}}}),p=a(8345),h=a(998),y=a(8492),f=a(5550),g=a(6312),v=a(3423),b=a(6190),Z=a(2118),_=a(9223),x=a(4324),k=a(5808),D=a(4525),P=a(2866),C=a(7912),E=a(4611),w=a(3059),S=a(4528),$=a(9709),I=a(3687),A=function(){var e=this,t=e._self._c;return t(h.Z,[t($.Z,{attrs:{color:"primary",width:"300",dark:"",app:""},model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},[t(D.Z,[t(P.km,[t(P.V9,{staticClass:"display-1"},[t("b",[e._v("USEFC")])]),t(P.oZ,[e._v(" Sistema ")])],1)],1),t(_.Z),t(k.Z,{attrs:{rounded:""}},e._l(e.items,(function(a,r){return t(D.Z,{key:r,attrs:{to:a.route}},[t(E.Z,[t(x.Z,[e._v(e._s(a.icon))])],1),t(P.km,[t(P.V9,[e._v(e._s(a.title))])],1)],1)})),1)],1),t(y.Z,{attrs:{absolute:"",color:"primary",height:"75",dark:"",app:""}},[t(f.Z,{on:{click:function(t){t.stopPropagation(),e.drawer=!e.drawer}}}),e.drawer?e._e():t(g.Z,[t("b",[e._v("USEFC")])]),t(I.Z),t(S.Z,{attrs:{"offset-y":""},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:r}){return[t(b.Z,e._g(e._b({attrs:{icon:"","x-large":""}},"v-btn",r,!1),a),[t(v.Z,{attrs:{color:"secondary",size:"46"}},[t("span",{staticClass:"white--text text-h6"},[e._v(e._s(e.getTextIconPerson()))])])],1)]}}])},[t(k.Z,[t(D.Z,{attrs:{link:""}},[t(P.km,[t(P.V9,{staticClass:"text-h6"},[e._v(" "+e._s(e.dataPerson.name+" "+e.dataPerson.lastnameFather)+" ")]),t(P.oZ,[e._v(e._s(e.dataPerson.email))])],1)],1)],1),t(_.Z),t(k.Z,{attrs:{nav:"",dense:""}},[t(C.Z,{attrs:{color:"primary"},model:{value:e.selectedItem,callback:function(t){e.selectedItem=t},expression:"selectedItem"}},e._l(e.itemsPerson,(function(a,r){return t(D.Z,{key:r,on:{click:function(e){return a.action()}}},[t(E.Z,[t(x.Z,[e._v(e._s(a.icon))])],1),t(P.km,[t(P.V9,[t("b",[e._v(e._s(a.text))])])],1)],1)})),1)],1)],1)],1),t(w.Z,[t(Z.Z,{attrs:{fluid:""}},[t("router-view")],1)],1)],1)},R=[],T={name:"DashboardMain",data(){return{selectedItem:0,itemsPerson:[{text:"Cerrar Sesión",icon:"mdi-logout",action:this.logout}],items:[],drawer:!0,dataPerson:{}}},created(){this.getDataPerson(),this.loadNavigation()},methods:{logout(){localStorage.removeItem("token"),localStorage.removeItem("authenticated"),localStorage.removeItem("key"),localStorage.removeItem("information"),pr.push({name:"login"})},loadNavigation(){0x5fb961afb2bc1==localStorage.getItem("key")?this.items=[{title:"Principal",icon:"mdi-view-dashboard",route:"/dashboard"},{title:"Pago",icon:"mdi-receipt-text-check-outline",route:"/payment"},{title:"Mis Pagos",icon:"mdi-email-fast-outline",route:"/myPayments"}]:this.items=[{title:"Principal",icon:"mdi-view-dashboard",route:"/dashboard"},{title:"Recibido",icon:"mdi-message-text-clock-outline",route:"/sentPayments"},{title:"Pago",icon:"mdi-receipt-text-check-outline",route:"/payment"},{title:"Mis Pagos",icon:"mdi-email-fast-outline",route:"/myPayments"},{title:"Ciclos",icon:"mdi-package",route:"/cycle"},{title:"Estudiantes",icon:"mdi-account-group",route:"/students"}]},getDataPerson(){this.dataPerson=JSON.parse(localStorage.getItem("information"))},getTextIconPerson(){return this.dataPerson.name.charAt(0).toUpperCase()+this.dataPerson.lastnameFather.charAt(0).toUpperCase()}}},B=T,M=(0,o.Z)(B,A,R,!1,null,null,null),O=M.exports,N=a(4145),q=a(4886),V=a(5495),F=a(1713),z=a(7394),L=a(7423),j=a(8520),U=a(9159),H=function(){var e=this,t=e._self._c;return t(Z.Z,{staticClass:"max-width-container",attrs:{fluid:""}},[t(N.Z,{staticClass:"rounded-lg"},[t(q.EB,{staticClass:"display-1 primary--text"},[t("b",[e._v("DASHBOARD")])]),t(q.ZB,[0!=e.specialties.length?t(L.Z,{staticClass:"mx-auto"},[t(j.ZP,{staticClass:"pa-4",attrs:{"active-class":"secondary lighten-5","show-arrows":""},model:{value:e.model,callback:function(t){e.model=t},expression:"model"}},e._l(e.specialties,(function(a,r){return t(U.Z,{key:r,scopedSlots:e._u([{key:"default",fn:function({active:r,toggle:s}){return[t(N.Z,{staticClass:"ma-4",attrs:{color:r?void 0:"grey lighten-3",height:"300",width:"250"},on:{click:s}},[t(V.Z,{attrs:{src:"https://cdn.vuetifyjs.com/images/cards/sunshine.jpg",height:"150px"}}),t(q.EB,[e._v(" "+e._s(a.specialityName)+" ")]),t(q.Qq,[e._v(" CICLO "+e._s(a.academicCycleName)+" ")]),t(F.Z,{staticClass:"fill-height",attrs:{align:"center",justify:"center"}},[t(z.T0,[r?t(x.Z,{attrs:{color:"white",size:"48","v-text":"mdi-close-circle-outline"}}):e._e()],1)],1)],1)]}}],null,!0)})})),1)],1):e._e()],1)],1)],1)},G=[],K={name:"DashboardDashboard",data(){return{specialties:[]}},created(){this.loadSpecialties()},methods:{async loadSpecialties(){await this.$axios.get("/enrollment-speciality/my",{headers:{Authorization:`Bearer ${localStorage.token}`}}).then((e=>{this.specialties=e.data.allItems})).catch((e=>{this.$queryError(e)}))}}},J=K,Q=(0,o.Z)(J,H,G,!1,null,null,null),W=Q.exports,X=a(9286),Y=function(){var e=this,t=e._self._c;return t(Z.Z,{staticClass:"max-width-container",attrs:{fluid:""}},[t(X.Z,{attrs:{items:e.itemsRouter,large:""}}),t(N.Z,{staticClass:"rounded-lg"},[t(q.EB,{staticClass:"display-1 primary--text"},[t("b",[e._v("TABLA DE CICLOS")]),t(I.Z),t("tableAdd",{on:{loadTable:function(t){return e.loadTable()}}})],1),t(q.ZB,[t("TableCycle",{ref:"tableData"})],1)],1)],1)},ee=[],te=a(4127),ae=a(3863),re=function(){var e=this,t=e._self._c;return t("div",[t(ae.Z,{staticClass:"elevation-1 mt-3 rounded-lg",attrs:{headers:e.headers,items:e.desserts},scopedSlots:e._u([{key:"item.index",fn:function({item:a}){return[t("b",[e._v(e._s(e.getIndex(a)))])]}},{key:"item.state",fn:function({item:a}){return[t(te.Z,{attrs:{color:"success",dark:""}},[t("b",[e._v(e._s(a.state="ACTIVO"))])])]}},{key:"item.specialty",fn:function({item:a}){return[t(te.Z,{attrs:{color:"info",link:"",outlined:""},on:{click:function(t){return e.goToSpecialty(a.year,a.name,a.id)}}},[t(x.Z,{attrs:{left:""}},[e._v(" mdi-server-plus ")]),t("b",[e._v("Especialidades")])],1)]}},{key:"item.actions",fn:function({item:a}){return[t("tableEdit",{attrs:{cycleRow:a},on:{loadTable:function(t){return e.loadTable()}}}),t("tableDelete",{attrs:{cycleRow:a},on:{loadTable:function(t){return e.loadTable()}}})]}}])})],1)},se=[],ne=a(4061),oe=a(5125),le=a(7808),ie=function(){var e=this,t=e._self._c;return t(ne.Z,{attrs:{persistent:"","max-width":"600px"},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:r}){return[t(b.Z,e._g(e._b({attrs:{fab:"","x-small":"",color:"warning"},on:{click:function(t){return e.getDataRow()}}},"v-btn",r,!1),a),[t(x.Z,[e._v(" mdi-pencil ")])],1)]}}]),model:{value:e.dialogEdit,callback:function(t){e.dialogEdit=t},expression:"dialogEdit"}},[t(N.Z,{staticClass:"rounded-lg"},[t(q.EB,{staticClass:"primary"},[t("span",{staticClass:"text-h5 white--text"},[e._v("Editar Ciclo")])]),t(q.ZB,{staticClass:"mt-5"},[t(Z.Z,[t("MessageError",{ref:"messageError"}),t(oe.Z,[t(le.Z,{attrs:{label:"Nombre:",type:"text",rules:e.empty,outlined:"",clearable:"",required:""},model:{value:e.formData.name,callback:function(t){e.$set(e.formData,"name",t)},expression:"formData.name"}}),t(le.Z,{attrs:{label:"Año:",type:"number",rules:e.empty,outlined:"",clearable:"",required:""},model:{value:e.formData.year,callback:function(t){e.$set(e.formData,"year",t)},expression:"formData.year"}})],1)],1)],1),t(q.h7,[t(I.Z),t(b.Z,{attrs:{color:"error",text:""},on:{click:function(t){e.dialogEdit=!1}}},[t("b",[e._v("Cerrar")])]),t(b.Z,{attrs:{color:"success",text:""},on:{click:function(t){return e.updateDataRow()}}},[t("b",[e._v("Enviar")])])],1)],1)],1)},ce=[],de=a(7359),ue=function(){var e=this,t=e._self._c;return t("div",[e.AlertView?t(de.Z,{staticClass:"text-left",attrs:{border:"left",color:"red",dismissible:"",icon:"mdi-alert-circle",type:"success"}},[e._v(e._s(e.AlertMessage))]):e._e()],1)},me=[],pe={name:"MessageError",data(){return{AlertView:!1,AlertMessage:""}},methods:{showAlertError(e){this.AlertMessage=e,this.AlertView=!0},hideAlertError(){this.AlertView=!1}}},he=pe,ye=(0,o.Z)(he,ue,me,!1,null,null,null),fe=ye.exports,ge={name:"CycleTableEdit",props:["cycleRow"],components:{MessageError:fe},data(){return{dialogEdit:!1,empty:[e=>(e||"").length>0||"Este campo es requerido"],formData:{}}},created(){},methods:{getDataRow(){this.formData.name=this.cycleRow.name,this.formData.year=this.cycleRow.year,this.$nextTick((()=>{this.$refs.messageError&&this.$refs.messageError.hideAlertError()}))},async updateDataRow(){await this.$axios.put("/academic-cicle/"+this.cycleRow.id,this.formData,{headers:{Authorization:`Bearer ${localStorage.token}`}}).then((e=>{this.dialogEdit=!1,this.$emit("loadTable"),this.$toast.success(e.data.content)})).catch((e=>{this.$queryError(e),this.$refs.messageError.showAlertError(e.response.data.content)}))}}},ve=ge,be=(0,o.Z)(ve,ie,ce,!1,null,null,null),Ze=be.exports,_e=function(){var e=this,t=e._self._c;return t(ne.Z,{attrs:{persistent:"","max-width":"550"},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:r}){return[t(b.Z,e._g(e._b({staticClass:"ml-2",attrs:{fab:"","x-small":"",color:"error"}},"v-btn",r,!1),a),[t(x.Z,[e._v(" mdi-delete ")])],1)]}}]),model:{value:e.dialogDelete,callback:function(t){e.dialogDelete=t},expression:"dialogDelete"}},[t(N.Z,[t(q.EB,{staticClass:"text-h5"},[e._v(" ¿Esta seguro de eliminar a "+e._s(e.cycleRow.name)+"? ")]),t(q.ZB,[e._v("La información sera eliminada permanentemente.")]),t(q.h7,[t(I.Z),t(b.Z,{attrs:{color:"error",text:""},on:{click:function(t){e.dialogDelete=!1}}},[t("b",[e._v("Cancelar")])]),t(b.Z,{attrs:{color:"success",text:""},on:{click:function(t){return e.deleteDataRow()}}},[t("b",[e._v("Aceptar")])])],1)],1)],1)},xe=[],ke={name:"CycleTableDelete",props:["cycleRow"],data(){return{dialogDelete:!1}},created(){},methods:{async deleteDataRow(){await this.$axios.delete("/academic-cicle/"+this.cycleRow.id,{headers:{Authorization:`Bearer ${localStorage.token}`}}).then((e=>{this.dialogDelete=!1,this.$emit("loadTable"),this.$toast.success(e.data.content)})).catch((e=>{this.$queryError(e),console.log(e)}))}}},De=ke,Pe=(0,o.Z)(De,_e,xe,!1,null,null,null),Ce=Pe.exports,Ee={name:"TableCycle",components:{tableEdit:Ze,tableDelete:Ce},data(){return{headers:[{text:"#",align:"start",sortable:!1,value:"index"},{text:"Año",value:"year"},{text:"Nombre",value:"name"},{text:"Estado",value:"state"},{text:"Especialidad",value:"specialty"},{text:"Acciones",value:"actions"}],desserts:[]}},created(){this.loadTable()},methods:{async loadTable(){await this.$axios.get("/academic-cicle",{headers:{Authorization:`Bearer ${localStorage.token}`}}).then((e=>{this.desserts=e.data.allItems})).catch((e=>{this.$queryError(e)}))},getIndex(e){const t=this.desserts.indexOf(e);return t+1},goToSpecialty(e,t,a){pr.push({name:"specialty",params:{yearCycle:e,nameCycle:t,idCycle:a}})}}},we=Ee,Se=(0,o.Z)(we,re,se,!1,null,null,null),$e=Se.exports,Ie=function(){var e=this,t=e._self._c;return t(ne.Z,{attrs:{persistent:"","max-width":"600px"},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:r}){return[t(b.Z,e._g(e._b({attrs:{color:"success",rounded:""},on:{click:function(t){return e.startDialog()}}},"v-btn",r,!1),a),[t(x.Z,{attrs:{left:""}},[e._v(" mdi-pencil-plus ")]),t("b",[e._v("Agregar")])],1)]}}]),model:{value:e.dialogAdd,callback:function(t){e.dialogAdd=t},expression:"dialogAdd"}},[t(N.Z,{staticClass:"rounded-lg"},[t(q.EB,{staticClass:"success"},[t("span",{staticClass:"text-h5 white--text"},[e._v("Agregar Ciclo")])]),t(q.ZB,{staticClass:"mt-5"},[t(Z.Z,[t("MessageError",{ref:"messageError"}),t(oe.Z,[t(le.Z,{attrs:{label:"Nombre:",type:"text",rules:e.empty,outlined:"",clearable:"",required:""},model:{value:e.formData.name,callback:function(t){e.$set(e.formData,"name",t)},expression:"formData.name"}}),t(le.Z,{attrs:{label:"Año:",type:"number",rules:e.empty,outlined:"",clearable:"",required:""},model:{value:e.formData.year,callback:function(t){e.$set(e.formData,"year",t)},expression:"formData.year"}})],1)],1)],1),t(q.h7,[t(I.Z),t(b.Z,{attrs:{color:"error",text:""},on:{click:function(t){e.dialogAdd=!1}}},[t("b",[e._v("Cerrar")])]),t(b.Z,{attrs:{color:"success",text:""},on:{click:function(t){return e.addDataRow()}}},[t("b",[e._v("Enviar")])])],1)],1)],1)},Ae=[],Re={name:"CycleTableAdd",components:{MessageError:fe},data(){return{dialogAdd:!1,empty:[e=>(e||"").length>0||"Este campo es requerido"],formData:{}}},created(){},methods:{async addDataRow(){await this.$axios.post("/academic-cicle/",this.formData,{headers:{Authorization:`Bearer ${localStorage.token}`}}).then((e=>{this.dialogAdd=!1,this.$emit("loadTable"),this.$toast.success(e.data.content)})).catch((e=>{this.$queryError(e),this.$refs.messageError.showAlertError(e.response.data.content)}))},startDialog(){this.formData={},this.$nextTick((()=>{this.$refs.messageError&&this.$refs.messageError.hideAlertError()}))}}},Te=Re,Be=(0,o.Z)(Te,Ie,Ae,!1,null,null,null),Me=Be.exports,Oe={name:"CycleMain",components:{TableCycle:$e,tableAdd:Me},data(){return{itemsRouter:[{text:"Ciclo",disabled:!0},{text:"",disabled:!0}]}},methods:{loadTable(){this.$refs.tableData.loadTable()}}},Ne=Oe,qe=(0,o.Z)(Ne,Y,ee,!1,null,null,null),Ve=qe.exports,Fe=a(266),ze=a(7280),Le=a(352),je=function(){var e=this,t=e._self._c;return t(h.Z,{attrs:{id:"LoginMain"}},[t(w.Z,[t(Z.Z,{staticClass:"fill-height",attrs:{fluid:""}},[t(F.Z,{attrs:{align:"center",justify:"center"}},[t(Fe.Z,{attrs:{cols:"12",sm:"10",md:"8",lg:"5"}},[t(N.Z,{staticClass:"elevation-12"},[t(ze.Z,[t(Le.Z,[t(F.Z,[t(Fe.Z,{attrs:{cols:"12",md:"8"}},[t(q.ZB,{staticClass:"mt-12"},[t("h1",{staticClass:"text-center display-2"},[e._v("Inicio de Sesión")]),t("h4",{staticClass:"text-center mt-4 mb-2"},[e._v(" Ingrese su DNI y contraseña ")]),e.AlertView?t(de.Z,{staticClass:"text-left",attrs:{border:"left",color:"error",dismissible:"",icon:"mdi-alert-circle",type:"success"}},[e._v(e._s(e.AlertMessage))]):e._e(),t(oe.Z,[t(le.Z,{attrs:{label:"Número de DNI",name:"dni",rules:[e=>!!e||"Este campo es requerido",e=>e&&e.length>=6||"La longitud mínima es de 6 caracteres"],"prepend-icon":"mdi-account",type:"text",color:"primary",clearable:""},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}}),t(le.Z,{attrs:{label:"Contraseña",name:"password",rules:[e=>!!e||"Este campo es requerido",e=>e&&e.length>=6||"La longitud mínima es de 6 caracteres"],"prepend-icon":"mdi-lock",color:"primary","append-icon":e.showPassword?"mdi-eye":"mdi-eye-off",type:e.showPassword?"text":"password",hint:"Haz clic en el icono del ojo para mostrar u ocultar la contraseña",clearable:""},on:{"click:append":function(t){e.showPassword=!e.showPassword},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.login()}},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1)],1),t("div",{staticClass:"text-center mb-lg-5"},[t(b.Z,{attrs:{color:"primary",dark:""},on:{click:function(t){return e.login()}}},[e._v("INGRESAR")])],1)],1),t(Fe.Z,{staticClass:"primary",attrs:{cols:"12",md:"4"}},[t(q.ZB,{staticClass:"white--text mt-lg-14 mt-md-14"},[t("h1",{staticClass:"text-center display-1"},[e._v("DATOS")]),t("h5",{staticClass:"text-center"},[e._v("Información importantes")])])],1)],1)],1)],1)],1)],1)],1)],1)],1)],1)},Ue=[],He={name:"LoginMain",data(){return{showPassword:!1,AlertView:!1,AlertMessage:"",form:{username:"",password:""}}},methods:{async login(){this.AlertView=!1,await this.$axios.post("/auth/login",this.form).then((e=>{localStorage.setItem("token",e.data.token),localStorage.setItem("authenticated",!0),localStorage.setItem("key",e.data.key),localStorage.setItem("information",JSON.stringify(e.data.information)),pr.push({name:"dashboard"})})).catch((e=>{this.AlertView=!0,this.AlertMessage=e.response.data.content}))}}},Ge=He,Ke=(0,o.Z)(Ge,je,Ue,!1,null,null,null),Je=Ke.exports,Qe=function(){var e=this,t=e._self._c;return t("div",[t(Z.Z,{staticClass:"max-width-container",attrs:{fluid:""}},[t(N.Z,{staticClass:"rounded-lg"},[t(q.EB,{staticClass:"display-1 primary--text"},[t("b",[e._v("MIS PAGOS")]),t(I.Z)],1),t(q.ZB,[t("MyPaymentsTable")],1)],1)],1)],1)},We=[],Xe=a(8893),Ye=a(2082),et=function(){var e=this,t=e._self._c;return t("div",[e.loader?t("loader",{ref:"loader",attrs:{object:"white",size:"10",speed:"1",bg:"#343a40",opacity:"30",name:"dots"}}):e._e(),0!=e.items.length?t("div",[t(Xe.Z,{attrs:{dense:""}},[t(z.Zy,{attrs:{group:"","hide-on-leave":""}},e._l(e.items,(function(a){return t(Ye.Z,{key:a.id,attrs:{color:a.status.color,small:"","fill-dot":""}},[t(de.Z,{staticClass:"white--text",attrs:{value:!0,color:a.status.color}},[t("h3",[e._v(" "+e._s("Pago "+a.status.name+" - "+a.specialityOpening.specialityName)+" ")]),t("MyPaymentsInformation",{attrs:{paymentId:a.id}}),t(_.Z,{staticClass:"my-1"}),t("h4",[e._v("Fecha y Hora: "+e._s(e.convertDate(a.moment)))]),t("h4",[e._v("Monto: S/"+e._s(a.amount))])],1)],1)})),1)],1)],1):t("div",[t(de.Z,{attrs:{dense:"",text:"",type:"info"}},[e._v(" No hay pagos. ")])],1)],1)},tt=[],at=a(8242),rt=a(5187),st=a(9481),nt=function(){var e=this,t=e._self._c;return t(ne.Z,{attrs:{persistent:"","max-width":"600px"},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:r}){return[t(b.Z,e._g(e._b({attrs:{icon:""},on:{click:function(t){return e.loadInformationPay()}}},"v-btn",r,!1),a),[t(x.Z,[e._v("mdi-card-search-outline")])],1)]}}]),model:{value:e.dialogEdit,callback:function(t){e.dialogEdit=t},expression:"dialogEdit"}},[t(N.Z,{staticClass:"rounded-lg"},[t(q.EB,{staticClass:"primary"},[t("span",{staticClass:"text-h5 white--text"},[e._v("Información de Voucher")])]),t(q.ZB,{staticClass:"mt-5"},[null!=e.dataPayment.specialityOpening?t(Z.Z,[t(de.Z,{attrs:{border:"left",color:"primary",text:""}},[t("b",{staticClass:"text-left"},[e._v(e._s(e.dataPayment.specialityOpening.year)),t(x.Z,{attrs:{color:"primary"}},[e._v("mdi-arrow-right-thin")]),e._v(" "+e._s(" CICLO "+e.dataPayment.specialityOpening.cycleName)),t(x.Z,{attrs:{color:"primary"}},[e._v("mdi-arrow-right-thin")]),e._v(e._s(e.dataPayment.specialityOpening.specialityName))],1)]),t(F.Z,[t(Fe.Z,{attrs:{cols:"12",lg:"6",md:"6"}},[t("h2",[e._v("Imagen de Voucher")]),null!=e.dataPayment.urlVoucher?t(V.Z,{attrs:{src:e.$axiosMinio+e.dataPayment.urlVoucher+`?t=${Date.now()}`,height:"450",contain:""}}):e._e()],1),t(Fe.Z,{attrs:{cols:"12",lg:"6",md:"6"}},[t(oe.Z,[t("h2",[e._v("Información del Voucher")]),t(le.Z,{attrs:{label:"Fecha de pago",type:"date",readonly:e.stateReadOnly,required:""},model:{value:e.dataPayment.date,callback:function(t){e.$set(e.dataPayment,"date",t)},expression:"dataPayment.date"}}),t(st.Z,{attrs:{items:[{id:"300000000000001",name:"BCP"},{id:"300000000000002",name:"Banco de la Nación"}],"item-text":"name","item-value":"id",label:"Banco",readonly:e.stateReadOnly,chips:"","small-chips":""},model:{value:e.dataPayment.bank,callback:function(t){e.$set(e.dataPayment,"bank",t)},expression:"dataPayment.bank"}}),t(le.Z,{attrs:{label:"Número de operación",type:"number",readonly:e.stateReadOnly,required:""},model:{value:e.dataPayment.operatioNumber,callback:function(t){e.$set(e.dataPayment,"operatioNumber",t)},expression:"dataPayment.operatioNumber"}}),t(le.Z,{attrs:{label:"Monto de Voucher",type:"number",readonly:e.stateReadOnly,required:""},model:{value:e.dataPayment.amount,callback:function(t){e.$set(e.dataPayment,"amount",t)},expression:"dataPayment.amount"}}),t("h2",{staticClass:"mb-3"},[e._v("Conceptos de Pago")]),t(at.Z,{attrs:{"active-class":"primary--text",column:""}},[null!=e.dataPayment.payEnroll&&0!=e.dataPayment.payEnroll.amount?t(te.Z,{attrs:{color:"success",outlined:""}},[t("b",[t(x.Z,{attrs:{left:""}},[e._v(" mdi-cash-multiple ")]),e._v(" "+e._s("Pago de Matrícula S/"+e.dataPayment.payEnroll.amount))],1)]):e._e(),null!=e.dataPayment.allPayPension?t("div",e._l(e.dataPayment.allPayPension,(function(a,r){return t(te.Z,{key:r,attrs:{color:"info",outlined:""}},[t("b",[t(x.Z,{attrs:{left:""}},[e._v(" mdi-cash-multiple ")]),e._v(" "+e._s("Pago de Pensión "+a.reference+" S/"+a.amount))],1)])})),1):e._e()],1)],1)],1)],1),null!=e.dataPayment.allRemark?t("div",[0!=e.dataPayment.allRemark.length?t("div",[t("h2",{staticClass:"mt-3"},[e._v("Mensajes")]),e._l(e.dataPayment.allRemark,(function(a,r){return t(D.Z,{key:r,attrs:{"two-line":""}},[t(P.km,[t(P.V9,[e._v(e._s(a.content))]),t(P.oZ,[e._v(e._s(a.email))])],1),t(rt.Z,[e._v(e._s(a.moment.substring(0,10)+" / "+a.moment.substring(11,19)))])],1)})),t(_.Z)],2):t("div",[t("h3",[e._v("Sin mensajes")])])]):e._e()],1):e._e()],1),t(q.h7,[t(I.Z),t(b.Z,{attrs:{color:"success",text:""},on:{click:function(t){e.dialogEdit=!1}}},[t("b",[e._v("Volver")])])],1)],1)],1)},ot=[],lt={name:"MyPaymentsInformation",props:["paymentId"],data(){return{dialogEdit:!1,stateReadOnly:!0,dataPayment:{}}},created(){},methods:{async loadInformationPay(){await this.$axios.get("/requisition-pay/"+this.paymentId+"/my",{headers:{Authorization:`Bearer ${localStorage.token}`}}).then((e=>{this.dataPayment=e.data})).catch((e=>{this.$queryError(e)}))}}},it=lt,ct=(0,o.Z)(it,nt,ot,!1,null,null,null),dt=ct.exports,ut={name:"MyPaymentsTable",components:{MyPaymentsInformation:dt},data(){return{loader:!1,interval:null,items:[],nonce:2}},created(){this.loadRequisitionPay()},methods:{async loadRequisitionPay(){this.loader=!0,await this.$axios.get("/requisition-pay/my",{headers:{Authorization:`Bearer ${localStorage.token}`}}).then((e=>{this.items=e.data.allItems,this.loader=!1})).catch((e=>{this.$queryError(e)}))},convertDate(e){let t=e.substring(0,10),a=e.substring(11,19);return t+" "+a}}},mt=ut,pt=(0,o.Z)(mt,et,tt,!1,null,null,null),ht=pt.exports,yt={name:"MyPaymentsMain",components:{MyPaymentsTable:ht},data(){return{}},created(){},methods:{}},ft=yt,gt=(0,o.Z)(ft,Qe,We,!1,null,null,null),vt=gt.exports,bt=function(){var e=this,t=e._self._c;return t(Z.Z,{staticClass:"max-width-container",attrs:{fluid:""}},[t(N.Z,{staticClass:"rounded-lg"},[t(q.EB,{staticClass:"display-1 primary--text"},[t("b",[e._v("PAGOS RECIBIDOS")]),t(I.Z)],1),t(q.ZB,[t("SentPaymentsTable")],1)],1)],1)},Zt=[],_t=function(){var e=this,t=e._self._c;return t("div",[t(ae.Z,{staticClass:"elevation-1 mt-3 rounded-lg",attrs:{headers:e.headers,items:e.desserts},scopedSlots:e._u([{key:"item.index",fn:function({item:a}){return[t("b",[e._v(e._s(e.getIndex(a)))])]}},{key:"item.lastName",fn:function({item:t}){return[e._v(" "+e._s(t.person.lastnameFather+" "+t.person.lastnameMother+", "+t.person.name)+" ")]}},{key:"item.date",fn:function({item:a}){return[t(te.Z,{attrs:{color:"info",outlined:""}},[t(x.Z,{attrs:{left:""}},[e._v(" mdi-calendar-range ")]),e._v(e._s(a.moment.substring(0,10))+" ")],1)]}},{key:"item.hour",fn:function({item:a}){return[t(te.Z,{attrs:{color:"blue-grey darken-2",outlined:""}},[t(x.Z,{attrs:{left:""}},[e._v(" mdi-timer-outline ")]),e._v(" "+e._s(a.moment.substring(11,19))+" ")],1)]}},{key:"item.view",fn:function({item:a}){return[t(b.Z,{attrs:{color:"success",fab:"","x-small":""},on:{click:function(t){return e.goToValidate(a.id)}}},[t(x.Z,[e._v("mdi-eye-outline ")])],1)]}}])})],1)},xt=[],kt={name:"SentPaymentsTable",data(){return{headers:[{text:"#",align:"start",sortable:!1,value:"index"},{text:"Nombres",value:"lastName"},{text:"Especialidad",value:"specialityOpening.specialityName"},{text:"Fecha",value:"date"},{text:"Hora",value:"hour"},{text:"Ver",value:"view"}],desserts:[]}},created(){this.loadTable()},methods:{async loadTable(){await this.$axios.get("/requisition-pay/sent?perPage=100",{headers:{Authorization:`Bearer ${localStorage.token}`}}).then((e=>{this.desserts=e.data.allItems})).catch((e=>{this.$queryError(e)}))},getIndex(e){const t=this.desserts.indexOf(e);return t+1},goToValidate(e){pr.push({name:"validate",params:{idPayment:e}})}}},Dt=kt,Pt=(0,o.Z)(Dt,_t,xt,!1,null,null,null),Ct=Pt.exports,Et={name:"SentPaymentsMain",components:{SentPaymentsTable:Ct},data(){return{}},created(){},methods:{}},wt=Et,St=(0,o.Z)(wt,bt,Zt,!1,null,null,null),$t=St.exports,It=function(){var e=this,t=e._self._c;return t(Z.Z,{staticClass:"max-width-container",attrs:{fluid:""}},[t(N.Z,{staticClass:"rounded-lg"},[t(q.EB,{staticClass:"display-1 primary--text"},[t("b",[e._v("FORMULARIO DE PAGO")]),t(I.Z)],1),t(q.ZB,[t("PaymentStepper")],1)],1)],1)},At=[],Rt=a(1625),Tt=a(535),Bt=a(5157),Mt=a(8491),Ot=function(){var e=this,t=e._self._c;return t("div",[t(Tt.Z,{attrs:{vertical:""},model:{value:e.flag,callback:function(t){e.flag=t},expression:"flag"}},[t(Mt.Z,{attrs:{complete:e.flag>1,step:"1"}},[e._v(" Seleccionar Especialidad ")]),t(Bt.Z,{attrs:{step:"1"}},[t(N.Z,{staticClass:"mb-12",attrs:{color:"grey lighten-4"}},[t(q.ZB,[e.AlertView?t(de.Z,{staticClass:"text-left",attrs:{border:"left",dismissible:"",text:"",icon:"mdi-alert-circle",type:"info"}},[e._v("Tiene un pago pendiente de revisión en esta Especialidad "),t(b.Z,{attrs:{outlined:"",small:"",color:"info"},on:{click:function(t){return e.$router.push({name:"myPayments"})}}},[t(x.Z,{attrs:{left:""}},[e._v("mdi-eye-outline ")]),t("b",[e._v("Mis Pagos")])],1)],1):e._e(),t(st.Z,{attrs:{items:e.specialties,"item-text":"specialityName","item-value":"id",label:"Seleccione la Especialidad","background-color":"white","prepend-inner-icon":"mdi-pencil-plus-outline",outlined:"","hide-details":"",chips:"","small-chips":""},model:{value:e.selectedSpecialty,callback:function(t){e.selectedSpecialty=t},expression:"selectedSpecialty"}})],1)],1),t(b.Z,{attrs:{color:"info",disabled:""==e.selectedSpecialty},on:{click:function(t){return e.verifyPayment()}}},[t("b",[e._v("CONTINUAR")])])],1),t(Mt.Z,{attrs:{complete:e.flag>2,step:"2"}},[e._v(" Subir Imagen y datos de Voucher ")]),t(Bt.Z,{attrs:{step:"2"}},[t(N.Z,{staticClass:"mb-12",attrs:{color:"grey lighten-4"}},[t(q.ZB,[t(Rt.Z,{attrs:{accept:"image/*",label:"Imagen de Voucher","background-color":"white","hide-details":"",outlined:"",chips:""},on:{change:e.previewImage},model:{value:e.selectedImage,callback:function(t){e.selectedImage=t},expression:"selectedImage"}}),t("br"),null!=e.selectedImage?t(F.Z,[t(Fe.Z,{attrs:{lg:"6",sm:"12"}},[t("h2",[e._v("Imagen de Voucher")]),e.previewURL?t(V.Z,{staticClass:"mt-5",attrs:{src:e.previewURL,height:"400",contain:""}}):e._e()],1),t(Fe.Z,{attrs:{lg:"6",sm:"12"}},[t(oe.Z,[t("h2",[e._v("Información del Voucher")]),t(le.Z,{staticClass:"mt-5",attrs:{rules:e.empty,"error-messages":e.date?"":"Campo requerido",label:"Ingrese Fecha de pago",type:"date","background-color":"white",outlined:"",clearable:"",required:""},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}}),t(st.Z,{attrs:{rules:e.empty,"error-messages":e.finalcialId?"":"Campo requerido",items:[{id:300000000000001,name:"BCP"},{id:300000000000002,name:"Banco de la Nación"}],"item-text":"name","item-value":"id",label:"Seleccione Banco","background-color":"white",outlined:"",chips:"","small-chips":""},model:{value:e.finalcialId,callback:function(t){e.finalcialId=t},expression:"finalcialId"}}),t(le.Z,{attrs:{rules:e.empty,"error-messages":e.operationNumber?"":"Campo requerido",label:"Número de operación",type:"number","background-color":"white",outlined:"",clearable:"",required:""},model:{value:e.operationNumber,callback:function(t){e.operationNumber=t},expression:"operationNumber"}}),t(le.Z,{attrs:{rules:e.empty,"error-messages":e.amount?"":"Campo requerido",label:"Monto de Voucher",type:"number","background-color":"white",outlined:"",clearable:"",required:""},model:{value:e.amount,callback:function(t){e.amount=t},expression:"amount"}}),t(le.Z,{attrs:{label:"Comentario",type:"text",messages:"* Opcional","background-color":"white",outlined:"",clearable:"",required:""},model:{value:e.comment,callback:function(t){e.comment=t},expression:"comment"}})],1)],1)],1):e._e()],1)],1),t(b.Z,{attrs:{color:"info",disabled:null==e.selectedImage||""==e.date||null==e.date||""==e.finalcialId||0==e.operationNumber||0==e.amount||null==e.operationNumber||null==e.amount},on:{click:function(t){e.flag=3,e.loadPayments()}}},[t("b",[e._v("CONTINUAR")])]),t(b.Z,{attrs:{color:"primary",text:""},on:{click:function(t){e.flag=1}}},[t("b",[e._v("VOLVER")])])],1),t(Mt.Z,{attrs:{complete:e.flag>3,step:"3"}},[e._v(" Calculo de conceptos de pago ")]),t(Bt.Z,{attrs:{step:"3"}},[t(N.Z,{staticClass:"mb-12",attrs:{color:"grey lighten-4"}},[t(q.ZB,[t(de.Z,{attrs:{type:"success"}},[t("b",[e._v("MONTO DE VOUCHER: S/"+e._s(e.sendData.amount))])]),e._l(e.viewCalculatePayments,(function(a,r){return t(de.Z,{key:r,attrs:{type:"info",outlined:"",text:"",dense:""}},[t("b",[e._v(e._s(a.field))])])}))],2)],1),t(b.Z,{attrs:{color:"info"},on:{click:function(t){e.flag=4}}},[t("b",[e._v("CONTINUAR")])]),t(b.Z,{attrs:{color:"primary",text:""},on:{click:function(t){e.flag=2}}},[t("b",[e._v("VOLVER")])])],1),t(Mt.Z,{attrs:{step:"4"}},[e._v(" Verificar información llenada")]),t(Bt.Z,{attrs:{step:"4"}},[t(N.Z,{staticClass:"mb-12",attrs:{color:"grey lighten-4"}},[t(q.ZB,[t(Z.Z,[t(F.Z,[t("h3",[e._v("ESPECIALIDAD")])]),t(F.Z,[t(Fe.Z,[t(st.Z,{attrs:{label:"Especialidad",value:e.selectedSpecialty,items:e.specialties,"item-text":"specialityName","item-value":"id","background-color":"white","hide-details":"",filled:"",shaped:"",readonly:""}})],1)],1),t(F.Z,[t("h3",[e._v("DATOS DE VOUCHER")])]),t(F.Z,[t(Fe.Z,[null!=e.selectedImage?t(le.Z,{attrs:{label:"Voucher","background-color":"white",value:e.selectedImage.name,readonly:"",filled:"",shaped:""}}):e._e(),t(le.Z,{attrs:{label:"Fecha de pago","background-color":"white",value:e.date,readonly:"",filled:"",shaped:""}}),t(st.Z,{attrs:{items:[{id:300000000000001,name:"BCP"},{id:300000000000002,name:"Banco de la Nación"}],"item-text":"name","item-value":"id",label:"Banco",value:e.finalcialId,"background-color":"white",readonly:"",filled:"",shaped:""}}),t(le.Z,{attrs:{label:"Número de operación","background-color":"white",value:e.operationNumber,readonly:"",filled:"",shaped:""}}),t(le.Z,{attrs:{label:"Monto de voucher","background-color":"white",value:e.sendData.amount,readonly:"",filled:"",shaped:""}}),t(le.Z,{attrs:{label:"Comentario","background-color":"white",value:e.comment,"hide-details":"",readonly:"",filled:"",shaped:""}})],1)],1),t(F.Z,[t("h3",[e._v("CONCEPTOS DE PAGO")])]),null!=e.payments.debtEnroll?t(F.Z,[0!=e.payments.debtEnroll.residue?t(Fe.Z,[t(le.Z,{attrs:{label:"Monto de pago de Matrícula","background-color":"white",value:e.sendData.payEnroll.amount,"hide-details":"",readonly:"",filled:"",shaped:""}})],1):e._e()],1):e._e(),e._l(e.sendData.allPayPension,(function(a,r){return t(F.Z,{key:r},[t(Fe.Z,[t(st.Z,{attrs:{label:"Pensión",value:a.paymentScheduleId,items:e.payments.allDebtPension,"item-text":"reference","item-value":"id","background-color":"white","hide-details":"",filled:"",shaped:"",readonly:""}})],1),t(Fe.Z,[t(le.Z,{attrs:{label:"Monto de pago de Pensión","background-color":"white",value:a.amount,"hide-details":"",readonly:"",filled:"",shaped:""}})],1)],1)}))],2)],1)],1),t(b.Z,{attrs:{color:"success"},on:{click:e.sendPayment}},[t("b",[e._v("ENVIAR")])]),t(b.Z,{attrs:{color:"primary",text:""},on:{click:function(t){e.flag=3}}},[t("b",[e._v("VOLVER")])])],1)],1)],1)},Nt=[],qt={data(){return{flag:1,selectedSpecialty:"",specialties:[],payments:{},selectedImage:null,previewURL:null,AlertView:!1,empty:[e=>!!e||"Campo requerido"],file:null,amount:0,date:"",operationNumber:0,finalcialId:"",comment:"",sendData:{allPayPension:[],amount:0,payEnroll:{amount:0}},viewCalculatePayments:[]}},created(){this.loadSpecialties()},methods:{async verifyPayment(){this.AlertView=!1,await this.$axios.get("/enrollment-speciality/"+this.selectedSpecialty+"/payment-enabled",{headers:{Authorization:`Bearer ${localStorage.token}`}}).then((e=>{e.data.enabled?this.flag=2:(this.AlertView=!0,this.$toast.warning("No puede continuar con la acción"))})).catch((e=>{this.$queryError(e)}))},async uploadFile(){return new Promise(((e,t)=>{var a=new FormData;a.append("file",this.file),this.$axiosFile.post("/storage/upload",a,{headers:{Authorization:`Bearer ${localStorage.token}`,"Content-Type":"multipart/form-data"}}).then((t=>{e(t.data.content)})).catch((e=>{t(e)}))}))},async loadSpecialties(){await this.$axios.get("/enrollment-speciality/my",{headers:{Authorization:`Bearer ${localStorage.token}`}}).then((e=>{this.specialties=e.data.allItems})).catch((e=>{this.$queryError(e)}))},async loadPayments(){await this.$axios.get("/enrollment-speciality/"+this.selectedSpecialty+"/payment-reason",{headers:{Authorization:`Bearer ${localStorage.token}`}}).then((e=>{this.payments=e.data,this.calculatePayments()})).catch((e=>{this.$queryError(e)}))},previewImage(e){if(this.file=e,this.selectedImage){const e=new FileReader;e.onload=e=>{this.previewURL=e.target.result},e.readAsDataURL(this.selectedImage)}},calculatePayments(){let e=this.amount;if(this.sendData.amount=0,this.sendData.allPayPension=[],this.sendData.payEnroll={},this.viewCalculatePayments=[],null===this.payments.debtEnroll&&(this.payments.debtEnroll={residue:0}),e<0)this.$toast.error("Error de monto");else if(this.sendData.amount=e,e<=this.payments.debtEnroll.residue)this.sendData.payEnroll.amount=e,0!=this.payments.debtEnroll.residue&&this.viewCalculatePayments.push({field:"Matrícula: Esta pagando S/"+this.sendData.payEnroll.amount+" --\x3e Debe aun "+(this.payments.debtEnroll.residue-e)});else{this.sendData.payEnroll.amount=this.payments.debtEnroll.residue,e-=this.payments.debtEnroll.residue,0!=this.payments.debtEnroll.residue&&this.viewCalculatePayments.push({field:"Matrícula: Esta pagando S/"+this.sendData.payEnroll.amount}),this.payments.allDebtPension.sort(((e,t)=>e.reference-t.reference));for(let t=0;t<this.payments.allDebtPension.length;t++){if(0==e)break;if(e<=this.payments.allDebtPension[t].residue){this.sendData.allPayPension.push({amount:e,paymentScheduleId:this.payments.allDebtPension[t].id}),this.viewCalculatePayments.push({field:"Pensión "+this.payments.allDebtPension[t].reference+": Esta pagando S/"+e+" --\x3e Debe aun S/"+(this.payments.allDebtPension[t].residue-e)}),this.amountAux=0;break}this.sendData.allPayPension.push({amount:this.payments.allDebtPension[t].residue,paymentScheduleId:this.payments.allDebtPension[t].id}),e-=this.payments.allDebtPension[t].residue,this.viewCalculatePayments.push({field:"Pensión "+this.payments.allDebtPension[t].reference+": Esta pagando S/"+this.payments.allDebtPension[t].residue})}}},sendDataPayment(e){return new Promise(((t,a)=>{this.$axios.post("/requisition-pay",{allPayPension:this.sendData.allPayPension,amount:this.sendData.amount,coment:this.comment,date:this.date,enrollmentSpecialityId:this.selectedSpecialty,financialEntityId:this.finalcialId,operationNumber:this.operationNumber,payEnroll:this.sendData.payEnroll,urlVoucher:e},{headers:{Authorization:`Bearer ${localStorage.token}`}}).then((e=>{t(e)})).catch((t=>{this.deleteFilePayment(e),this.$toast.error(t.response.data.content),a(t)}))}))},async deleteFilePayment(e){await this.$axiosFile.delete("/storage/remove/"+e,{headers:{Authorization:`Bearer ${localStorage.token}`}}).catch((e=>{this.$queryError(e)}))},sendPayment(){this.uploadFile().then((e=>this.sendDataPayment(e))).then((()=>{this.$toast.success("Pago realizado satisfactoriamente"),pr.push({name:"myPayments"})})).catch((()=>{this.flag=1,this.$toast.error("Ha ocurrido un error al subir la información")}))}}},Vt=qt,Ft=(0,o.Z)(Vt,Ot,Nt,!1,null,null,null),zt=Ft.exports,Lt={name:"PaymentMain",components:{PaymentStepper:zt},data(){return{}},created(){},methods:{}},jt=Lt,Ut=(0,o.Z)(jt,It,At,!1,null,null,null),Ht=Ut.exports,Gt=function(){var e=this,t=e._self._c;return t(Z.Z,{staticClass:"max-width-container",attrs:{fluid:""}},[t(X.Z,{attrs:{items:e.itemsRouter,large:""}}),t(N.Z,{staticClass:"rounded-lg"},[t(q.EB,{staticClass:"display-1 primary--text"},[t("b",[e._v('ESPECIALIDADES DE "'+e._s(e.$route.params.yearCycle+" CICLO "+e.$route.params.nameCycle.toUpperCase())+'"')]),t(I.Z),t("TableAdd",{on:{loadTable:function(t){return e.loadTable()}}})],1),t(q.ZB,[t("TableSpecialty",{ref:"tableData"})],1)],1)],1)},Kt=[],Jt=function(){var e=this,t=e._self._c;return t("div",[t(ae.Z,{staticClass:"elevation-1 mt-3 rounded-lg",attrs:{headers:e.headers,items:e.desserts},scopedSlots:e._u([{key:"item.index",fn:function({item:a}){return[t("b",[e._v(e._s(e.getIndex(a)))])]}},{key:"item.state",fn:function({item:a}){return[t(te.Z,{attrs:{color:"green",dark:""}},[t("b",[e._v(e._s(a.calories)+"ACTIVO")])])]}},{key:"item.register",fn:function({item:e}){return[t("registerMass",{attrs:{specialtyRow:e}})]}},{key:"item.actions",fn:function({item:a}){return[t("tableEdit",{attrs:{specialtyRow:a},on:{loadTable:function(t){return e.loadTable()}}}),t("tableDelete",{attrs:{specialtyRow:a},on:{loadTable:function(t){return e.loadTable()}}})]}}])})],1)},Qt=[],Wt=a(1030),Xt=function(){var e=this,t=e._self._c;return t(ne.Z,{attrs:{persistent:"","max-width":"600px"},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:r}){return[t(b.Z,e._g(e._b({attrs:{fab:"","x-small":"",color:"warning"},on:{click:function(t){return e.getDataRow()}}},"v-btn",r,!1),a),[t(x.Z,[e._v(" mdi-pencil ")])],1)]}}]),model:{value:e.dialogEdit,callback:function(t){e.dialogEdit=t},expression:"dialogEdit"}},[t(N.Z,{staticClass:"rounded-lg"},[t(q.EB,{staticClass:"primary"},[t("span",{staticClass:"text-h5 white--text"},[e._v("Editar Especialidad")])]),t(q.ZB,{staticClass:"mt-5"},[t(Z.Z,[t("MessageError",{ref:"messageError"}),t(oe.Z,[t(ne.Z,{ref:"dialogStart",attrs:{"return-value":e.formData.startDate,persistent:"",width:"290px"},on:{"update:returnValue":function(t){return e.$set(e.formData,"startDate",t)},"update:return-value":function(t){return e.$set(e.formData,"startDate",t)}},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:r}){return[t(le.Z,e._g(e._b({attrs:{label:"Fecha de inicio:","prepend-icon":"mdi-calendar",rules:e.empty,readonly:"",outlined:"",clearable:""},model:{value:e.formData.startDate,callback:function(t){e.$set(e.formData,"startDate",t)},expression:"formData.startDate"}},"v-text-field",r,!1),a))]}}]),model:{value:e.modalStart,callback:function(t){e.modalStart=t},expression:"modalStart"}},[t(Wt.Z,{attrs:{color:"primary",scrollable:""},model:{value:e.formData.startDate,callback:function(t){e.$set(e.formData,"startDate",t)},expression:"formData.startDate"}},[t(I.Z),t(b.Z,{attrs:{text:"",color:"primary"},on:{click:function(t){e.modalStart=!1}}},[e._v(" Cancel ")]),t(b.Z,{attrs:{text:"",color:"primary"},on:{click:function(t){return e.$refs.dialogStart.save(e.formData.startDate)}}},[e._v(" OK ")])],1)],1),t(ne.Z,{ref:"dialogFinal",attrs:{"return-value":e.formData.finalDate,persistent:"",width:"290px"},on:{"update:returnValue":function(t){return e.$set(e.formData,"finalDate",t)},"update:return-value":function(t){return e.$set(e.formData,"finalDate",t)}},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:r}){return[t(le.Z,e._g(e._b({attrs:{label:"Fecha de fin:","prepend-icon":"mdi-calendar",rules:e.empty,readonly:"",outlined:"",clearable:""},model:{value:e.formData.finalDate,callback:function(t){e.$set(e.formData,"finalDate",t)},expression:"formData.finalDate"}},"v-text-field",r,!1),a))]}}]),model:{value:e.modalFinal,callback:function(t){e.modalFinal=t},expression:"modalFinal"}},[t(Wt.Z,{attrs:{color:"primary",scrollable:""},model:{value:e.formData.finalDate,callback:function(t){e.$set(e.formData,"finalDate",t)},expression:"formData.finalDate"}},[t(I.Z),t(b.Z,{attrs:{text:"",color:"primary"},on:{click:function(t){e.modalFinal=!1}}},[e._v(" Cancel ")]),t(b.Z,{attrs:{text:"",color:"primary"},on:{click:function(t){return e.$refs.dialogFinal.save(e.formData.finalDate)}}},[e._v(" OK ")])],1)],1)],1)],1)],1),t(q.h7,[t(I.Z),t(b.Z,{attrs:{color:"error",text:""},on:{click:function(t){e.dialogEdit=!1}}},[t("b",[e._v("Cerrar")])]),t(b.Z,{attrs:{color:"success",text:""},on:{click:function(t){return e.updateDataRow()}}},[t("b",[e._v("Enviar")])])],1)],1)],1)},Yt=[],ea={name:"SpecialtyTableCycle",props:["specialtyRow"],components:{MessageError:fe},data(){return{modalStart:!1,modalFinal:!1,dialogEdit:!1,empty:[e=>(e||"").length>0||"Este campo es requerido"],formData:{}}},created(){},methods:{getDataRow(){this.formData={startDate:this.specialtyRow.startDate,finalDate:this.specialtyRow.finalDate},this.$nextTick((()=>{this.$refs.messageError&&this.$refs.messageError.hideAlertError()}))},async updateDataRow(){await this.$axios.put("/academic-cicle/"+this.$route.params.idCycle+"/speciality/"+this.specialtyRow.id,this.formData,{headers:{Authorization:`Bearer ${localStorage.token}`}}).then((e=>{this.dialogEdit=!1,this.$emit("loadTable"),this.$toast.success(e.data.content)})).catch((e=>{this.$queryError(e),this.$refs.messageError.showAlertError(e.response.data.content)}))}}},ta=ea,aa=(0,o.Z)(ta,Xt,Yt,!1,null,null,null),ra=aa.exports,sa=function(){var e=this,t=e._self._c;return t(ne.Z,{attrs:{persistent:"","max-width":"550"},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:r}){return[t(b.Z,e._g(e._b({staticClass:"ml-2",attrs:{fab:"","x-small":"",color:"error"}},"v-btn",r,!1),a),[t(x.Z,[e._v(" mdi-delete ")])],1)]}}]),model:{value:e.dialogDelete,callback:function(t){e.dialogDelete=t},expression:"dialogDelete"}},[t(N.Z,[t(q.EB,{staticClass:"text-h5"},[e._v(" ¿Esta seguro de eliminar a "+e._s(e.specialtyRow.name)+"? ")]),t(q.ZB,[e._v("La información sera eliminada permanentemente.")]),t(q.h7,[t(I.Z),t(b.Z,{attrs:{color:"error",text:""},on:{click:function(t){e.dialogDelete=!1}}},[t("b",[e._v("Cancelar")])]),t(b.Z,{attrs:{color:"success",text:""},on:{click:function(t){return e.deleteDataRow()}}},[t("b",[e._v("Aceptar")])])],1)],1)],1)},na=[],oa={name:"SpecialtyTableDelete",props:["specialtyRow"],data(){return{dialogDelete:!1}},created(){},methods:{async deleteDataRow(){await this.$axios.delete("/academic-cicle/"+this.$route.params.idCycle+"/speciality/"+this.specialtyRow.id,{headers:{Authorization:`Bearer ${localStorage.token}`}}).then((e=>{this.dialogDelete=!1,this.$emit("loadTable"),this.$toast.success(e.data.content)})).catch((e=>{this.$queryError(e),console.log(e)}))}}},la=oa,ia=(0,o.Z)(la,sa,na,!1,null,null,null),ca=ia.exports,da=function(){var e=this,t=e._self._c;return t(ne.Z,{attrs:{persistent:"","max-width":"1000px"},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:r}){return[t(te.Z,e._g(e._b({attrs:{color:"success",link:"",outlined:""},on:{click:function(t){return e.startDialog()}}},"v-chip",r,!1),a),[t(x.Z,{attrs:{left:""}},[e._v(" mdi-account-plus ")]),t("b",[e._v("Registro")])],1)]}}]),model:{value:e.dialogRegisterMass,callback:function(t){e.dialogRegisterMass=t},expression:"dialogRegisterMass"}},[t(N.Z,{staticClass:"rounded-lg"},[t(q.EB,{staticClass:"primary"},[t("span",{staticClass:"text-h5 white--text"},[e._v("Registro Masivo")])]),t(q.ZB,{staticClass:"mt-5"},[t(Z.Z,[t(de.Z,{staticClass:"text-left",attrs:{border:"left",text:"",icon:"mdi-alert-circle",type:"info"}},[t("b",[e._v("Puede eliminar filas de datos en el campo de acciones, si hay un error se presenta en el primer dato de la tabla.")])]),t(Rt.Z,{attrs:{label:"Archivo Excel"},nativeOn:{change:function(t){return e.handleFileUpload.apply(null,arguments)}}}),t("MessageError",{ref:"messageError"}),t(ae.Z,{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.formData,"items-per-page":5},scopedSlots:e._u([{key:"item",fn:function({item:a}){return[t("tr",e._l(a,(function(r,s){return t("td",{key:s},["id"!==s?["actions"!==s?[t("input",{directives:[{name:"model",rawName:"v-model",value:a[s],expression:"item[key]"}],attrs:{size:a[s].toString().length+1,type:"text"},domProps:{value:a[s]},on:{input:function(t){t.target.composing||e.$set(a,s,t.target.value)}}})]:[t(b.Z,{attrs:{icon:""},on:{click:function(t){return e.deleteRow(a.id)}}},[t(x.Z,[e._v("mdi-delete")])],1)]]:e._e()],2)})),0)]}}])})],1)],1),t(q.h7,[t(I.Z),t(b.Z,{attrs:{color:"error",text:""},on:{click:function(t){e.dialogRegisterMass=!1}}},[t("b",[e._v("Cerrar")])]),t(b.Z,{attrs:{color:"success",text:""},on:{click:function(t){return e.registerMass()}}},[t("b",[e._v("Registrar datos")])])],1)],1)],1)},ua=[],ma=(a(3767),a(8585),a(8696),a(4105)),pa={name:"RegisterMass",props:["specialtyRow"],components:{MessageError:fe},data(){return{dialogRegisterMass:!1,headers:[{text:"Dni",value:"dni"},{text:"Nombre",value:"name"},{text:"Paterno",value:"lastnameFather"},{text:"Materno",value:"lastnameMother"},{text:"Correo",value:"email"},{text:"Celular",value:"phone"},{text:"Acciones",value:"actions",sortable:!1}],formData:[]}},created(){},methods:{async registerMass(){this.$refs.messageError.hideAlertError();let e=this.formData.slice();for(let a=0;a<e.length;a++)try{await this.registerRow(e[a]),this.formData.shift()}catch(t){return void this.$toast.error("Error al registrar estudiante.")}this.dialogRegisterMass=!1,this.$toast.success("Se finalizo correctamente el registro masivo")},async registerRow(e){return new Promise(((t,a)=>{this.$axios.post("/academic-cicle/"+this.$route.params.idCycle+"/speciality/"+this.specialtyRow.id+"/enroll",e,{headers:{Authorization:`Bearer ${localStorage.token}`}}).then((a=>{this.$toast.success(a.data.content+" para "+e.dni),t(a)})).catch((e=>{this.$refs.messageError.showAlertError(e.response.data.content),a(e)}))}))},handleFileUpload(e){const t=e.target.files[0],a=new FileReader;a.onload=e=>{const t=new Uint8Array(e.target.result),a=(0,ma.ij)(t,{type:"array"}),r=a.Sheets[a.SheetNames[0]],s=ma.P6.sheet_to_json(r,{header:1});this.validateData(s)},a.readAsArrayBuffer(t)},validateData(e){let t=[];if(e.length>0){for(let a=1;a<e.length;a++)t.push({dni:e[a][0],lastnameFather:e[a][2],lastnameMother:e[a][3],name:e[a][1],email:e[a][4],phone:e[a][5],actions:"",id:a});this.formData=t}},startDialog(){this.formData=[],this.$nextTick((()=>{this.$refs.messageError&&this.$refs.messageError.hideAlertError()}))},deleteRow(e){const t=this.formData.findIndex((t=>t.id===e));-1!==t&&this.formData.splice(t,1)}}},ha=pa,ya=(0,o.Z)(ha,da,ua,!1,null,null,null),fa=ya.exports,ga={name:"TableSpecialty",components:{tableEdit:ra,tableDelete:ca,registerMass:fa},data(){return{dialogDelete:!1,headers:[{text:"#",align:"start",sortable:!1,value:"index"},{text:"Nombre",value:"name"},{text:"#Cursos",value:"numberCourses"},{text:"Estado",value:"state"},{text:"Registro",value:"register"},{text:"Acciones",value:"actions"}],desserts:[]}},created(){this.loadTable()},methods:{async loadTable(){await this.$axios.get("/academic-cicle/"+this.$route.params.idCycle+"/speciality",{headers:{Authorization:`Bearer ${localStorage.token}`}}).then((e=>{this.desserts=e.data.allItems})).catch((e=>{this.$queryError(e)}))},getIndex(e){const t=this.desserts.indexOf(e);return t+1}}},va=ga,ba=(0,o.Z)(va,Jt,Qt,!1,null,null,null),Za=ba.exports,_a=a(120),xa=function(){var e=this,t=e._self._c;return t(ne.Z,{attrs:{persistent:"","max-width":"600px"},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:r}){return[t(b.Z,e._g(e._b({attrs:{color:"success",rounded:""},on:{click:function(t){return e.startDialog()}}},"v-btn",r,!1),a),[t(x.Z,{attrs:{left:""}},[e._v(" mdi-pencil-plus ")]),t("b",[e._v("Agregar")])],1)]}}]),model:{value:e.dialogAdd,callback:function(t){e.dialogAdd=t},expression:"dialogAdd"}},[t(N.Z,{staticClass:"rounded-lg"},[t(q.EB,{staticClass:"success"},[t("span",{staticClass:"text-h5 white--text"},[e._v("Agregar Especialidad")])]),t(q.ZB,{staticClass:"mt-5"},[t(Z.Z,[t("MessageError",{ref:"messageError"}),t(oe.Z,[t(ne.Z,{ref:"dialogStart",attrs:{"return-value":e.formData.data.startDate,persistent:"",width:"290px"},on:{"update:returnValue":function(t){return e.$set(e.formData.data,"startDate",t)},"update:return-value":function(t){return e.$set(e.formData.data,"startDate",t)}},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:r}){return[t(le.Z,e._g(e._b({attrs:{label:"Fecha de inicio:","prepend-icon":"mdi-calendar",rules:e.empty,readonly:"",outlined:"",clearable:""},model:{value:e.formData.data.startDate,callback:function(t){e.$set(e.formData.data,"startDate",t)},expression:"formData.data.startDate"}},"v-text-field",r,!1),a))]}}]),model:{value:e.modalStart,callback:function(t){e.modalStart=t},expression:"modalStart"}},[t(Wt.Z,{attrs:{color:"primary",scrollable:""},model:{value:e.formData.data.startDate,callback:function(t){e.$set(e.formData.data,"startDate",t)},expression:"formData.data.startDate"}},[t(I.Z),t(b.Z,{attrs:{text:"",color:"primary"},on:{click:function(t){e.modalStart=!1}}},[e._v(" Cancel ")]),t(b.Z,{attrs:{text:"",color:"primary"},on:{click:function(t){return e.$refs.dialogStart.save(e.formData.data.startDate)}}},[e._v(" OK ")])],1)],1),t(ne.Z,{ref:"dialogFinal",attrs:{"return-value":e.formData.data.finalDate,persistent:"",width:"290px"},on:{"update:returnValue":function(t){return e.$set(e.formData.data,"finalDate",t)},"update:return-value":function(t){return e.$set(e.formData.data,"finalDate",t)}},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:r}){return[t(le.Z,e._g(e._b({attrs:{label:"Fecha de fin:","prepend-icon":"mdi-calendar",rules:e.empty,readonly:"",outlined:"",clearable:""},model:{value:e.formData.data.finalDate,callback:function(t){e.$set(e.formData.data,"finalDate",t)},expression:"formData.data.finalDate"}},"v-text-field",r,!1),a))]}}]),model:{value:e.modalFinal,callback:function(t){e.modalFinal=t},expression:"modalFinal"}},[t(Wt.Z,{attrs:{color:"primary",scrollable:""},model:{value:e.formData.data.finalDate,callback:function(t){e.$set(e.formData.data,"finalDate",t)},expression:"formData.data.finalDate"}},[t(I.Z),t(b.Z,{attrs:{text:"",color:"primary"},on:{click:function(t){e.modalFinal=!1}}},[e._v(" Cancel ")]),t(b.Z,{attrs:{text:"",color:"primary"},on:{click:function(t){return e.$refs.dialogFinal.save(e.formData.data.finalDate)}}},[e._v(" OK ")])],1)],1),t(le.Z,{attrs:{label:"Costo de Matrícula","prepend-icon":"mdi-cash-multiple",type:"number",rules:e.empty,outlined:"",clearable:"",required:""},model:{value:e.formData.data.enrollCost,callback:function(t){e.$set(e.formData.data,"enrollCost",t)},expression:"formData.data.enrollCost"}}),t(le.Z,{attrs:{label:"Costo de Pensión","prepend-icon":"mdi-cash-multiple",type:"number",rules:e.empty,outlined:"",clearable:"",required:""},model:{value:e.formData.data.pensionCost,callback:function(t){e.$set(e.formData.data,"pensionCost",t)},expression:"formData.data.pensionCost"}}),0!=e.itemsCheckbox.length?t("h2",[e._v("Especialidades:")]):t("h2",{staticClass:"text-center"},[e._v(" No hay especialidades disponibles ")]),e._l(e.itemsCheckbox,(function(a,r){return t(_a.Z,{key:r,attrs:{label:a.text,value:a.value,"hide-details":""},model:{value:e.formData.allSpecialityId,callback:function(t){e.$set(e.formData,"allSpecialityId",t)},expression:"formData.allSpecialityId"}})}))],2)],1)],1),t(q.h7,[t(I.Z),t(b.Z,{attrs:{color:"error",text:""},on:{click:function(t){e.dialogAdd=!1}}},[t("b",[e._v("Cerrar")])]),t(b.Z,{attrs:{color:"success",text:""},on:{click:function(t){return e.addSpecialty()}}},[t("b",[e._v("Enviar")])])],1)],1)],1)},ka=[],Da={name:"SpecialtyTableAdd",components:{MessageError:fe},data(){return{modalStart:!1,modalFinal:!1,dialogAdd:!1,itemsCheckbox:[],empty:[e=>(e||"").length>0||"Este campo es requerido"],formData:{allSpecialityId:[],data:{finalDate:"",startDate:"",enrollCost:0,pensionCost:0}}}},created(){},methods:{async getItemsList(){await this.$axios.get("/academic-cicle/"+this.$route.params.idCycle+"/not-speciality",{headers:{Authorization:`Bearer ${localStorage.token}`}}).then((e=>{this.itemsCheckbox=e.data})).catch((e=>{this.$queryError(e)}))},async addSpecialty(){await this.$axios.post("/academic-cicle/"+this.$route.params.idCycle+"/speciality/multiple-register",this.formData,{headers:{Authorization:`Bearer ${localStorage.token}`}}).then((e=>{this.dialogAdd=!1,this.$emit("loadTable"),this.$toast.success(e.data.content)})).catch((e=>{this.$queryError(e),this.$refs.messageError.showAlertError(e.response.data.content)}))},startDialog(){this.getItemsList(),this.formData={allSpecialityId:[],data:{finalDate:"",startDate:"",enrollCost:0,pensionCost:0}},this.itemsCheckbox=[],this.$nextTick((()=>{this.$refs.messageError&&this.$refs.messageError.hideAlertError()}))}}},Pa=Da,Ca=(0,o.Z)(Pa,xa,ka,!1,null,null,null),Ea=Ca.exports,wa={name:"SpecialtyMain",components:{TableSpecialty:Za,TableAdd:Ea},data(){return{itemsRouter:[{text:"Ciclo",disabled:!1,to:"/cycle"},{text:"Especialidad",disabled:!0}]}},methods:{goToCycle(){pr.push({name:"cycle"})},loadTable(){this.$refs.tableData.loadTable()}}},Sa=wa,$a=(0,o.Z)(Sa,Gt,Kt,!1,null,null,null),Ia=$a.exports,Aa=function(){var e=this,t=e._self._c;return t(Z.Z,{staticClass:"max-width-container",attrs:{fluid:""}},[t(N.Z,{staticClass:"rounded-lg"},[t(q.EB,{staticClass:"display-1 primary--text"},[t("b",[e._v("ESTUDIANTES")]),t(I.Z)],1),t(q.ZB,[t(N.Z,[t(Z.Z,[t("p",[t("b",[e._v("Filtro para la tabla de estudiantes:")])]),t(F.Z,{staticClass:"mb-0"},[t(Fe.Z,{attrs:{cols:"12",lg:"6",md:"6",xs:"12"}},[t(st.Z,{attrs:{items:e.dataCycle,"item-text":"name","item-value":"value",label:"Ciclo:","prepend-icon":"mdi-archive","hide-details":"",outlined:"",dense:""},on:{change:function(t){return e.getDataSpecialty()}},model:{value:e.selectedCycle,callback:function(t){e.selectedCycle=t},expression:"selectedCycle"}})],1),t(Fe.Z,{attrs:{cols:"12",lg:"6",md:"6",xs:"12"}},[t(st.Z,{attrs:{items:e.dataSpecialty,"item-text":"name","item-value":"value",label:"Especialidad:","prepend-icon":"mdi-archive",disabled:e.disabledSpecialty,"hide-details":"",outlined:"",dense:""},on:{change:function(t){return e.$refs.tableData.loadTable(e.selectedSpecialty)}},model:{value:e.selectedSpecialty,callback:function(t){e.selectedSpecialty=t},expression:"selectedSpecialty"}})],1)],1)],1)],1),t("TableStudents",{ref:"tableData",attrs:{idCycle:e.selectedCycle}})],1)],1)],1)},Ra=[],Ta=function(){var e=this,t=e._self._c;return t("div",[t(ae.Z,{staticClass:"elevation-1 mt-3 rounded-lg",attrs:{headers:e.headers,items:e.desserts},scopedSlots:e._u([{key:"item.index",fn:function({item:a}){return[t("b",[e._v(e._s(e.getIndex(a)))])]}}])})],1)},Ba=[],Ma={name:"TableStudents",props:["idCycle"],data(){return{headers:[{text:"#",align:"start",sortable:!1,value:"index"},{text:"Nombre",value:"person.name"},{text:"Paterno",value:"person.lastnameFather"},{text:"Materno",value:"person.lastnameMother"},{text:"DNI",value:"person.dni"},{text:"Celular",value:"person.phone"},{text:"Correo",value:"person.email"}],desserts:[]}},created(){},methods:{async loadTable(e){await this.$axios.get("/academic-cicle/"+this.idCycle+"/speciality/"+e+"/enroll?perPage=100",{headers:{Authorization:`Bearer ${localStorage.token}`}}).then((e=>{this.desserts=e.data.allItems})).catch((e=>{this.$queryError(e),this.$toast.error(e.response.data.content)}))},clearTable(){this.desserts=[]},getIndex(e){const t=this.desserts.indexOf(e);return t+1}}},Oa=Ma,Na=(0,o.Z)(Oa,Ta,Ba,!1,null,null,null),qa=Na.exports,Va={name:"StudentsMain",components:{TableStudents:qa},data(){return{selectedCycle:"",selectedSpecialty:"",disabledSpecialty:!0,dataCycle:[],dataSpecialty:[]}},created(){this.getDataCycle()},methods:{async getDataCycle(){this.dataCycle=[],await this.$axios.get("/academic-cicle",{headers:{Authorization:`Bearer ${localStorage.token}`}}).then((e=>{for(let t=0;t<e.data.allItems.length;t++){const a={name:e.data.allItems[t].name,value:e.data.allItems[t].id};this.dataCycle.push(a)}})).catch((e=>{this.$queryError(e),console.log(e)}))},async getDataSpecialty(){this.$refs.tableData.clearTable(),this.selectedSpecialty="",this.dataSpecialty=[],await this.$axios.get("/academic-cicle/"+this.selectedCycle+"/speciality",{headers:{Authorization:`Bearer ${localStorage.token}`}}).then((e=>{for(let t=0;t<e.data.allItems.length;t++){const a={name:e.data.allItems[t].name,value:e.data.allItems[t].id};this.dataSpecialty.push(a)}this.disabledSpecialty=!1})).catch((e=>{this.$queryError(e),console.log(e)}))}}},Fa=Va,za=(0,o.Z)(Fa,Aa,Ra,!1,null,null,null),La=za.exports,ja=function(){var e=this,t=e._self._c;return t(Z.Z,{staticClass:"max-width-container",attrs:{fluid:""}},[t(N.Z,{staticClass:"rounded-lg"},[t(q.EB,{staticClass:"display-1 primary--text"},[t("b",[e._v("REVISIÓN DE PAGO")]),t(I.Z)],1),t(q.ZB,[null!=e.dataPayment.specialityOpening?t(Z.Z,[t(de.Z,{attrs:{border:"left",color:"primary",text:""}},[t("b",{staticClass:"text-left"},[e._v(e._s(e.dataPayment.specialityOpening.year)),t(x.Z,{attrs:{color:"primary"}},[e._v("mdi-arrow-right-thin")]),e._v(" "+e._s(" CICLO "+e.dataPayment.specialityOpening.cycleName)),t(x.Z,{attrs:{color:"primary"}},[e._v("mdi-arrow-right-thin")]),e._v(e._s(e.dataPayment.specialityOpening.specialityName))],1)]),t(F.Z,[t(Fe.Z,{attrs:{cols:"12",lg:"6",md:"6"}},[t("h2",[e._v("Imagen de Voucher")]),t("sendPaymentsImage",{attrs:{imageSrc:e.dataPayment.urlVoucher},on:{loadPayment:function(t){return e.loadPayment()}}}),null!=e.dataPayment.urlVoucher?t(V.Z,{attrs:{src:e.$axiosMinio+e.dataPayment.urlVoucher+`?t=${Date.now()}`,height:"450",contain:""}}):e._e()],1),t(Fe.Z,{attrs:{cols:"12",lg:"6",md:"6"}},[t(oe.Z,[t("h2",[e._v("Información del Voucher")]),null!=e.dataPayment.person?t(de.Z,{staticClass:"mt-5",attrs:{border:"left",color:"info",text:""}},[t(x.Z,{attrs:{color:"info"}},[e._v("mdi-account")]),e._v(e._s(e.dataPayment.person.lastnameFather+" "+e.dataPayment.person.lastnameMother+" "+e.dataPayment.person.name+" / "+e.dataPayment.person.email))],1):e._e(),t(le.Z,{attrs:{label:"Fecha de pago",type:"date",readonly:e.stateReadOnly,required:""},model:{value:e.dataPayment.date,callback:function(t){e.$set(e.dataPayment,"date",t)},expression:"dataPayment.date"}}),t(st.Z,{attrs:{items:[{id:"300000000000001",name:"BCP"},{id:"300000000000002",name:"Banco de la Nación"}],"item-text":"name","item-value":"id",label:"Banco",readonly:e.stateReadOnly,chips:"","small-chips":""},model:{value:e.dataPayment.bank,callback:function(t){e.$set(e.dataPayment,"bank",t)},expression:"dataPayment.bank"}}),t(le.Z,{attrs:{label:"Número de operación",type:"number",readonly:e.stateReadOnly,required:""},model:{value:e.dataPayment.operatioNumber,callback:function(t){e.$set(e.dataPayment,"operatioNumber",t)},expression:"dataPayment.operatioNumber"}}),t(le.Z,{attrs:{label:"Monto de Voucher",type:"number",readonly:e.stateReadOnly,required:""},model:{value:e.dataPayment.amount,callback:function(t){e.$set(e.dataPayment,"amount",t)},expression:"dataPayment.amount"}}),t("h2",{staticClass:"mb-3"},[e._v("Conceptos de Pago")]),t(at.Z,{attrs:{"active-class":"primary--text",column:""}},[null!=e.dataPayment.payEnroll&&0!=e.dataPayment.payEnroll.amount?t(te.Z,{attrs:{color:"success",outlined:""}},[t("b",[t(x.Z,{attrs:{left:""}},[e._v(" mdi-cash-multiple ")]),e._v(" "+e._s("Pago de Matrícula S/"+e.dataPayment.payEnroll.amount))],1)]):e._e(),null!=e.dataPayment.allPayPension?t("div",e._l(e.dataPayment.allPayPension,(function(a,r){return t(te.Z,{key:r,attrs:{color:"info",outlined:""}},[t("b",[t(x.Z,{attrs:{left:""}},[e._v(" mdi-cash-multiple ")]),e._v(" "+e._s("Pago de Pensión "+a.reference+" S/"+a.amount))],1)])})),1):e._e()],1)],1)],1)],1),null!=e.dataPayment.allRemark?t("div",[0!=e.dataPayment.allRemark.length?t("div",[t("h2",{staticClass:"mt-3"},[e._v("Mensajes")]),e._l(e.dataPayment.allRemark,(function(a,r){return t(D.Z,{key:r,attrs:{"two-line":""}},[t(P.km,[t(P.V9,[e._v(e._s(a.content))]),t(P.oZ,[e._v(e._s(a.email))])],1),t(rt.Z,[e._v(e._s(a.moment.substring(0,10)+" / "+a.moment.substring(11,19)))])],1)})),t(_.Z)],2):t("div",[t("h3",[e._v("Sin mensajes")])])]):e._e()],1):e._e()],1),t(q.h7,[t(I.Z),t(b.Z,{attrs:{color:"error"},on:{click:function(t){return e.goToSendPayments()}}},[t("b",[e._v("Volver")])]),t(ne.Z,{attrs:{persistent:"","max-width":"550"},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:r}){return[t(b.Z,e._g(e._b({staticClass:"ml-2",attrs:{color:"success"}},"v-btn",r,!1),a),[t("b",[e._v("Validar")])])]}}]),model:{value:e.dialogDelete,callback:function(t){e.dialogDelete=t},expression:"dialogDelete"}},[t(N.Z,[t(q.EB,{staticClass:"text-h5"},[e._v(" ¿Esta seguro de validar el pago? ")]),t(q.ZB,[e._v("La información sera valida automáticamente.")]),t(q.h7,[t(I.Z),t(b.Z,{attrs:{color:"error",text:""},on:{click:function(t){e.dialogDelete=!1}}},[t("b",[e._v("Cancelar")])]),t(b.Z,{attrs:{color:"success",text:""},on:{click:function(t){return e.validatePayment()}}},[t("b",[e._v("Aceptar")])])],1)],1)],1)],1)],1)],1)},Ua=[],Ha=a(757),Ga=function(){var e=this,t=e._self._c;return t(ne.Z,{attrs:{persistent:"","max-width":"600px"},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:r}){return[t(b.Z,e._g(e._b({attrs:{icon:""}},"v-btn",r,!1),a),[t(x.Z,[e._v("mdi-image-edit-outline")])],1)]}}]),model:{value:e.dialogEdit,callback:function(t){e.dialogEdit=t},expression:"dialogEdit"}},[t(N.Z,{staticClass:"rounded-lg"},[t(q.EB,{staticClass:"primary"},[t("span",{staticClass:"text-h5 white--text"},[e._v("Editar Voucher")])]),t(q.ZB,{staticClass:"mt-5"},[t(Z.Z,[t("cropper",{ref:"cropper",staticClass:"cropper",attrs:{src:e.img+`?t=${Date.now()}`}}),t(Ha.Z,{attrs:{dark:""}},[t(b.Z,{on:{click:function(t){return e.rotate(-90)}}},[t(x.Z,[e._v("mdi-rotate-left")])],1),t(b.Z,{on:{click:function(t){return e.rotate(90)}}},[t(x.Z,[e._v("mdi-rotate-right")])],1)],1)],1)],1),t(q.h7,[t(I.Z),t(b.Z,{attrs:{color:"error",text:""},on:{click:function(t){e.dialogEdit=!1}}},[t("b",[e._v("Cancelar")])]),t(b.Z,{attrs:{color:"success",text:""},on:{click:function(t){return e.updateFile()}}},[t("b",[e._v("Actualizar")])])],1)],1)],1)},Ka=[],Ja=a(516),Qa={name:"SendPaymentsImage",props:["imageSrc"],components:{Cropper:Ja.fl},data(){return{dialogEdit:!1,img:this.$axiosMinio+this.imageSrc}},created(){},methods:{rotate(e){this.$refs.cropper.rotate(e)},updateFile(){const{canvas:e}=this.$refs.cropper.getResult();if(e){const t=new FormData;e.toBlob((e=>{t.append("file",e),this.$axiosFile.post("/storage/update/"+this.imageSrc,t,{headers:{Authorization:`Bearer ${localStorage.token}`,"Content-Type":"multipart/form-data"}}).then((e=>{this.$emit("loadPayment"),this.dialogEdit=!1,this.$toast.success(e.data.content)})).catch((e=>{this.$queryError(e)}))}),"image/jpg")}}}},Wa=Qa,Xa=(0,o.Z)(Wa,Ga,Ka,!1,null,null,null),Ya=Xa.exports,er={name:"SentPaymentsValidate",components:{sendPaymentsImage:Ya},data(){return{dataPayment:{},stateReadOnly:!0,dialogDelete:!1}},created(){this.loadPayment()},methods:{async loadPayment(){await this.$axios.get("/requisition-pay/"+this.$route.params.idPayment+"/sent",{headers:{Authorization:`Bearer ${localStorage.token}`}}).then((e=>{this.dataPayment=e.data})).catch((e=>{this.$queryError(e)}))},goToSendPayments(){pr.push({name:"sentPayments"})},async validatePayment(){await this.$axios.put("/requisition-pay/"+this.$route.params.idPayment+"/validate?emailNotification="+this.dataPayment.person.email,{},{headers:{Authorization:`Bearer ${localStorage.token}`}}).then((()=>{this.$toast.success("Se ha validado correctamente el pago"),pr.push({name:"sentPayments"})})).catch((e=>{this.dialogDelete=!1,this.$queryError(e)}))}}},tr=er,ar=(0,o.Z)(tr,ja,Ua,!1,null,null,null),rr=ar.exports,sr=function(){var e=this,t=e._self._c;return t("div",[t(Z.Z,{attrs:{fluid:"","fill-height":""}},[t(F.Z,{attrs:{align:"center",justify:"center"}},[t(Fe.Z,{staticClass:"text-center",attrs:{cols:"12"}},[t("h1",{staticClass:"display-1"},[e._v("Error de autenticación")]),t("p",[e._v("Lo sentimos, no tienes permiso para acceder a esta página.")])])],1)],1)],1)},nr=[],or={name:"ErrorMessage",data(){return{}},created(){setTimeout((()=>{this.routerLogin()}),3500)},methods:{routerLogin(){pr.push({name:"login"})}}},lr=or,ir=(0,o.Z)(lr,sr,nr,!1,null,null,null),cr=ir.exports;r.ZP.use(p.ZP);const dr=[{path:"/login",name:"login",beforeEnter:ur,component:Je},{path:"/",component:O,meta:{requiresAuth:!0},children:[{path:"",redirect:"dashboard"},{path:"cycle",name:"cycle",component:Ve},{path:"dashboard",name:"dashboard",component:W},{path:"myPayments",name:"myPayments",component:vt},{path:"payment",name:"payment",component:Ht},{path:"sentPayments",name:"sentPayments",component:$t},{path:"students",name:"students",component:La},{path:"specialty/:yearCycle/:nameCycle/:idCycle",name:"specialty",component:Ia},{path:"validate/:idPayment",name:"validate",component:rr}]},{path:"/error",name:"errorMessage",component:cr},{path:"*",redirect:"/"},{path:"/:catchAll(.*)",redirect:"/"}];function ur(e,t,a){"true"===localStorage.getItem("authenticated")?a({name:"dashboard"}):a()}const mr=new p.ZP({mode:"history",base:"/",routes:dr});mr.beforeEach(((e,t,a)=>{const r=e.matched.some((e=>e.meta.requiresAuth)),s="true"===localStorage.getItem("authenticated");r&&!s?a("/login"):a()}));var pr=mr,hr=a(629);r.ZP.use(hr.ZP);var yr=new hr.ZP.Store({state:{state:!1},mutations:{SET_STATE(e,t){e.nombre=t},logout(){localStorage.removeItem("token"),localStorage.removeItem("authenticated"),localStorage.removeItem("key"),localStorage.removeItem("information")}},actions:{},getters:{}}),fr=a(6154),gr=a(1151),vr=a(8385);r.ZP.use(vr.Z),r.ZP.config.productionTip=!1,r.ZP.use(gr.ZP),r.ZP.prototype.$axios=fr.Z.create({baseURL:"https://usefc.site/backend/controller/"}),r.ZP.prototype.$axiosFile=fr.Z.create({baseURL:"https://usefc.site/backend/file/"}),r.ZP.prototype.$axiosMinio="https://usefc.site/bucket/payment/",r.ZP.prototype.$queryError=function(e){"undefined"===typeof e.response.data.status?this.$toast.error(e.response.data.content):(localStorage.removeItem("token"),localStorage.removeItem("authenticated"),localStorage.removeItem("key"),localStorage.removeItem("information"),pr.push({name:"errorMessage"}))},new r.ZP({vuetify:m,router:pr,store:yr,render:e=>e(c)}).$mount("#app")}},t={};function a(r){var s=t[r];if(void 0!==s)return s.exports;var n=t[r]={exports:{}};return e[r].call(n.exports,n,n.exports,a),n.exports}a.m=e,function(){var e=[];a.O=function(t,r,s,n){if(!r){var o=1/0;for(d=0;d<e.length;d++){r=e[d][0],s=e[d][1],n=e[d][2];for(var l=!0,i=0;i<r.length;i++)(!1&n||o>=n)&&Object.keys(a.O).every((function(e){return a.O[e](r[i])}))?r.splice(i--,1):(l=!1,n<o&&(o=n));if(l){e.splice(d--,1);var c=s();void 0!==c&&(t=c)}}return t}n=n||0;for(var d=e.length;d>0&&e[d-1][2]>n;d--)e[d]=e[d-1];e[d]=[r,s,n]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var r in t)a.o(t,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};a.O.j=function(t){return 0===e[t]};var t=function(t,r){var s,n,o=r[0],l=r[1],i=r[2],c=0;if(o.some((function(t){return 0!==e[t]}))){for(s in l)a.o(l,s)&&(a.m[s]=l[s]);if(i)var d=i(a)}for(t&&t(r);c<o.length;c++)n=o[c],a.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return a.O(d)},r=self["webpackChunkfront_usefc"]=self["webpackChunkfront_usefc"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var r=a.O(void 0,[998],(function(){return a(7996)}));r=a.O(r)})();
//# sourceMappingURL=app.5922d2ae.js.map