(function(){"use strict";var t={889:function(t,e,a){a(7658);var r=a(144),s=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},n=[],o=a(1001),i={},l=(0,o.Z)(i,s,n,!1,null,null,null),c=l.exports,d=a(1705),u=a(6808);r.ZP.use(d.Z);var m=new d.Z({lang:{locales:{es:u.Z},current:"es"},theme:{options:{customProperties:!0},themes:{light:{primary:"#5e151d",secondary:"#606060",accent:"#82B1FF",error:"#BC3030",info:"#167DCF",success:"#2FA434",warning:"#FFBF00"}},typography:{fontFamily:"Roboto"}}}),p=a(8345),h=a(998),f=a(8492),y=a(5550),g=a(6312),v=a(3423),b=a(6190),Z=a(4145),x=a(2118),_=a(9223),D=a(4324),k=a(5808),C=a(4525),E=a(6021),P=a(4611),S=a(3059),w=a(4528),$=a(9709),A=a(3687),I=function(){var t=this,e=t._self._c;return e(h.Z,[e($.Z,{attrs:{color:"primary",width:"300",dark:"",app:""},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[e(C.Z,[e(E.km,[e(E.V9,{staticClass:"display-1"},[e("b",[t._v("USEFC")])]),e("small",[t._v(" Unidad de Segunda Especialidad y Formación Continua ")])],1)],1),e(_.Z),e(k.Z,{attrs:{rounded:""}},t._l(t.items,(function(a,r){return e(C.Z,{key:r,attrs:{to:a.route}},[e(P.Z,[e(D.Z,[t._v(t._s(a.icon))])],1),e(E.km,[e(E.V9,[t._v(t._s(a.title))])],1)],1)})),1)],1),e(f.Z,{attrs:{absolute:"",color:"primary",height:"75",dark:"",app:""}},[e(y.Z,{on:{click:function(e){e.stopPropagation(),t.drawer=!t.drawer}}}),t.drawer?t._e():e(g.Z,[e("b",[t._v("USEFC")])]),e(A.Z),e(w.Z,{attrs:{bottom:"","min-width":"250px",rounded:"","offset-y":""},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:r}){return[e(b.Z,t._g(t._b({attrs:{icon:"","x-large":""}},"v-btn",r,!1),a),[e(v.Z,{attrs:{color:"secondary",size:"46"}},[e("span",{staticClass:"white--text text-h6"},[t._v(t._s(t.getTextIconPerson()))])])],1)]}}])},[e(Z.Z,[e(E.km,{staticClass:"justify-center"},[e("div",{staticClass:"mx-auto text-center"},[e(v.Z,{staticClass:"mb-1",attrs:{color:"secondary",size:"46"}},[e("span",{staticClass:"white--text text-h6"},[t._v(t._s(t.getTextIconPerson()))])]),e("h3",{staticClass:"mx-3"},[t._v(" "+t._s(t.dataPerson.name+" "+t.dataPerson.lastnameFather)+" ")]),e("p",{staticClass:"text-caption mt-1"},[t._v(" "+t._s(t.dataPerson.email)+" ")]),e(_.Z,{staticClass:"my-3"}),e(b.Z,{attrs:{depressed:"",rounded:"",text:""},on:{click:function(e){return t.logout()}}},[e("b",[t._v("Cerrar Sesión")])])],1)])],1)],1)],1),e(S.Z,[e(x.Z,{attrs:{fluid:""}},[e("router-view")],1)],1)],1)},T=[],M={name:"DashboardMain",data(){return{selectedItem:0,itemsPerson:[{text:"Cerrar Sesión",icon:"mdi-logout",action:this.logout}],items:[],drawer:!0,dataPerson:{},totalPayments:0}},created(){this.getDataPerson(),this.loadNavigation(),this.getTotalPayments()},methods:{logout(){localStorage.removeItem("token"),localStorage.removeItem("authenticated"),localStorage.removeItem("key"),localStorage.removeItem("information"),Qr.push({name:"login"})},loadNavigation(){0x5fb961afb2bc1==localStorage.getItem("key")?this.items=[{title:"Principal",icon:"mdi-view-dashboard",route:"/dashboard"},{title:"Pago",icon:"mdi-receipt-text-check-outline",route:"/payment"},{title:"Mis Pagos",icon:"mdi-email-fast-outline",route:"/myPayments"}]:this.items=[{title:"Principal",icon:"mdi-view-dashboard",route:"/dashboard"},{title:"Recibido",icon:"mdi-message-text-clock-outline",route:"/sentPayments"},{title:"Pago",icon:"mdi-receipt-text-check-outline",route:"/payment"},{title:"Mis Pagos",icon:"mdi-email-fast-outline",route:"/myPayments"},{title:"Ciclos",icon:"mdi-package",route:"/cycle"},{title:"Estudiantes",icon:"mdi-account-group",route:"/students"},{title:"Finanzas",icon:"mdi-finance",route:"/finance"}]},getDataPerson(){this.dataPerson=JSON.parse(localStorage.getItem("information"))},getTextIconPerson(){return this.dataPerson.name.charAt(0).toUpperCase()+this.dataPerson.lastnameFather.charAt(0).toUpperCase()},async getTotalPayments(){await this.$axios.get("/requisition-pay/total-sent",{headers:{Authorization:`Bearer ${localStorage.token}`}}).then((t=>{this.totalPayments=t.data.content})).catch((t=>{this.$queryError(t)}))},checkColor(t){return 0==t?"green":t<=25?"orange":"red"}}},R=M,B=(0,o.Z)(R,I,T,!1,null,null,null),O=B.exports,q=a(4886),N=a(5495),F=a(1713),V=a(7394),z=a(7423),L=a(8520),j=a(9159),U=function(){var t=this,e=t._self._c;return e(x.Z,{staticClass:"max-width-container",attrs:{fluid:""}},[e(Z.Z,{staticClass:"rounded-lg"},[e(q.EB,{staticClass:"display-1 primary--text"},[e("b",[t._v("DASHBOARD")])]),e(q.ZB,[0!=t.specialties.length?e(z.Z,{staticClass:"mx-auto"},[e(L.ZP,{staticClass:"pa-4",attrs:{"active-class":"secondary lighten-5","show-arrows":""}},t._l(t.specialties,(function(a,r){return e(j.Z,{key:r,scopedSlots:t._u([{key:"default",fn:function({active:r,toggle:s}){return[e(Z.Z,{staticClass:"ma-4",attrs:{color:r?void 0:"grey lighten-3",height:"300",width:"250"},on:{click:s}},[e(N.Z,{attrs:{src:"https://cdn.vuetifyjs.com/images/cards/sunshine.jpg",height:"150px"}}),e(q.EB,[t._v(" "+t._s(a.specialityName)+" ")]),e(q.Qq,[t._v(" CICLO "+t._s(a.academicCycleName)+" ")]),e(F.Z,{staticClass:"fill-height",attrs:{align:"center",justify:"center"}},[e(V.T0,[r?e(D.Z,{attrs:{color:"white",size:"48","v-text":"mdi-close-circle-outline"}}):t._e()],1)],1)],1)]}}],null,!0)})})),1)],1):t._e()],1)],1)],1)},G=[],H={name:"DashboardDashboard",data(){return{specialties:[]}},created(){this.loadSpecialties()},methods:{async loadSpecialties(){await this.$axios.get("/enrollment-speciality/my",{headers:{Authorization:`Bearer ${localStorage.token}`}}).then((t=>{this.specialties=t.data.allItems})).catch((t=>{this.$queryError(t)}))}}},J=H,K=(0,o.Z)(J,U,G,!1,null,null,null),Q=K.exports,W=a(9286),X=function(){var t=this,e=t._self._c;return e(x.Z,{staticClass:"max-width-container",attrs:{fluid:""}},[e(W.Z,{attrs:{items:t.itemsRouter,large:""}}),e(Z.Z,{staticClass:"rounded-lg"},[e(q.EB,{staticClass:"display-1 primary--text"},[e("b",[t._v("TABLA DE CICLOS")]),e(A.Z),e("tableAdd",{on:{loadTable:function(e){return t.loadTable()}}})],1),e(q.ZB,[e("TableCycle",{ref:"tableData"})],1)],1)],1)},Y=[],tt=a(4127),et=a(3863),at=function(){var t=this,e=t._self._c;return e("div",[e(et.Z,{staticClass:"elevation-1 mt-3 rounded-lg",attrs:{headers:t.headers,items:t.desserts},scopedSlots:t._u([{key:"item.index",fn:function({item:a}){return[e("b",[t._v(t._s(t.getIndex(a)))])]}},{key:"item.state",fn:function({item:a}){return[e(tt.Z,{attrs:{color:"success",dark:""}},[e("b",[t._v(t._s(a.state="ACTIVO"))])])]}},{key:"item.specialty",fn:function({item:a}){return[e(tt.Z,{attrs:{color:"info",link:"",outlined:""},on:{click:function(e){return t.goToSpecialty(a.year,a.name,a.id)}}},[e(D.Z,{attrs:{left:""}},[t._v(" mdi-server-plus ")]),e("b",[t._v("Especialidades")])],1)]}},{key:"item.actions",fn:function({item:a}){return[e("tableEdit",{attrs:{cycleRow:a},on:{loadTable:function(e){return t.loadTable()}}}),e("tableDelete",{attrs:{cycleRow:a},on:{loadTable:function(e){return t.loadTable()}}})]}}])})],1)},rt=[],st=a(4061),nt=a(5125),ot=a(7808),it=function(){var t=this,e=t._self._c;return e(st.Z,{attrs:{persistent:"","max-width":"600px"},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:r}){return[e(b.Z,t._g(t._b({attrs:{fab:"","x-small":"",color:"warning"},on:{click:function(e){return t.getDataRow()}}},"v-btn",r,!1),a),[e(D.Z,[t._v(" mdi-pencil ")])],1)]}}]),model:{value:t.dialogEdit,callback:function(e){t.dialogEdit=e},expression:"dialogEdit"}},[e(Z.Z,{staticClass:"rounded-lg"},[e(q.EB,{staticClass:"primary"},[e("span",{staticClass:"text-h5 white--text"},[t._v("Editar Ciclo")])]),e(q.ZB,{staticClass:"mt-5"},[e(x.Z,[e("MessageError",{ref:"messageError"}),e(nt.Z,[e(ot.Z,{attrs:{label:"Nombre:",type:"text",rules:t.empty,outlined:"",clearable:"",required:""},model:{value:t.formData.name,callback:function(e){t.$set(t.formData,"name",e)},expression:"formData.name"}}),e(ot.Z,{attrs:{label:"Año:",type:"number",rules:t.empty,outlined:"",clearable:"",required:""},model:{value:t.formData.year,callback:function(e){t.$set(t.formData,"year",e)},expression:"formData.year"}})],1)],1)],1),e(q.h7,[e(A.Z),e(b.Z,{attrs:{color:"error",text:""},on:{click:function(e){t.dialogEdit=!1}}},[e("b",[t._v("Cerrar")])]),e(b.Z,{attrs:{color:"success",text:""},on:{click:function(e){return t.updateDataRow()}}},[e("b",[t._v("Enviar")])])],1)],1)],1)},lt=[],ct=a(7359),dt=function(){var t=this,e=t._self._c;return e("div",[t.AlertView?e(ct.Z,{staticClass:"text-left",attrs:{border:"left",color:"red",dismissible:"",icon:"mdi-alert-circle",type:"success"}},[t._v(t._s(t.AlertMessage))]):t._e()],1)},ut=[],mt={name:"MessageError",data(){return{AlertView:!1,AlertMessage:""}},methods:{showAlertError(t){this.AlertMessage=t,this.AlertView=!0},hideAlertError(){this.AlertView=!1}}},pt=mt,ht=(0,o.Z)(pt,dt,ut,!1,null,null,null),ft=ht.exports,yt={name:"CycleTableEdit",props:["cycleRow"],components:{MessageError:ft},data(){return{dialogEdit:!1,empty:[t=>(t||"").length>0||"Este campo es requerido"],formData:{}}},created(){},methods:{getDataRow(){this.formData.name=this.cycleRow.name,this.formData.year=this.cycleRow.year,this.$nextTick((()=>{this.$refs.messageError&&this.$refs.messageError.hideAlertError()}))},async updateDataRow(){await this.$axios.put("/academic-cicle/"+this.cycleRow.id,this.formData,{headers:{Authorization:`Bearer ${localStorage.token}`}}).then((t=>{this.dialogEdit=!1,this.$emit("loadTable"),this.$toast.success(t.data.content)})).catch((t=>{this.$queryError(t),this.$refs.messageError.showAlertError(t.response.data.content)}))}}},gt=yt,vt=(0,o.Z)(gt,it,lt,!1,null,null,null),bt=vt.exports,Zt=function(){var t=this,e=t._self._c;return e(st.Z,{attrs:{persistent:"","max-width":"550"},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:r}){return[e(b.Z,t._g(t._b({staticClass:"ml-2",attrs:{fab:"","x-small":"",color:"error"}},"v-btn",r,!1),a),[e(D.Z,[t._v(" mdi-delete ")])],1)]}}]),model:{value:t.dialogDelete,callback:function(e){t.dialogDelete=e},expression:"dialogDelete"}},[e(Z.Z,[e(q.EB,{staticClass:"text-h5"},[t._v(" ¿Esta seguro de eliminar a "+t._s(t.cycleRow.name)+"? ")]),e(q.ZB,[t._v("La información sera eliminada permanentemente.")]),e(q.h7,[e(A.Z),e(b.Z,{attrs:{color:"error",text:""},on:{click:function(e){t.dialogDelete=!1}}},[e("b",[t._v("Cancelar")])]),e(b.Z,{attrs:{color:"success",text:""},on:{click:function(e){return t.deleteDataRow()}}},[e("b",[t._v("Aceptar")])])],1)],1)],1)},xt=[],_t={name:"CycleTableDelete",props:["cycleRow"],data(){return{dialogDelete:!1}},created(){},methods:{async deleteDataRow(){await this.$axios.delete("/academic-cicle/"+this.cycleRow.id,{headers:{Authorization:`Bearer ${localStorage.token}`}}).then((t=>{this.dialogDelete=!1,this.$emit("loadTable"),this.$toast.success(t.data.content)})).catch((t=>{this.$queryError(t),console.log(t)}))}}},Dt=_t,kt=(0,o.Z)(Dt,Zt,xt,!1,null,null,null),Ct=kt.exports,Et={name:"TableCycle",components:{tableEdit:bt,tableDelete:Ct},data(){return{headers:[{text:"#",align:"start",sortable:!1,value:"index"},{text:"Año",value:"year"},{text:"Nombre",value:"name"},{text:"Estado",value:"state"},{text:"Especialidad",value:"specialty"},{text:"Acciones",value:"actions"}],desserts:[]}},created(){this.loadTable()},methods:{async loadTable(){await this.$axios.get("/academic-cicle",{headers:{Authorization:`Bearer ${localStorage.token}`}}).then((t=>{this.desserts=t.data.allItems})).catch((t=>{this.$queryError(t)}))},getIndex(t){const e=this.desserts.indexOf(t);return e+1},goToSpecialty(t,e,a){Qr.push({name:"specialty",params:{yearCycle:t,nameCycle:e,idCycle:a}})}}},Pt=Et,St=(0,o.Z)(Pt,at,rt,!1,null,null,null),wt=St.exports,$t=function(){var t=this,e=t._self._c;return e(st.Z,{attrs:{persistent:"","max-width":"600px"},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:r}){return[e(b.Z,t._g(t._b({attrs:{color:"success",rounded:""},on:{click:function(e){return t.startDialog()}}},"v-btn",r,!1),a),[e(D.Z,{attrs:{left:""}},[t._v(" mdi-pencil-plus ")]),e("b",[t._v("Agregar")])],1)]}}]),model:{value:t.dialogAdd,callback:function(e){t.dialogAdd=e},expression:"dialogAdd"}},[e(Z.Z,{staticClass:"rounded-lg"},[e(q.EB,{staticClass:"success"},[e("span",{staticClass:"text-h5 white--text"},[t._v("Agregar Ciclo")])]),e(q.ZB,{staticClass:"mt-5"},[e(x.Z,[e("MessageError",{ref:"messageError"}),e(nt.Z,[e(ot.Z,{attrs:{label:"Nombre:",type:"text",rules:t.empty,outlined:"",clearable:"",required:""},model:{value:t.formData.name,callback:function(e){t.$set(t.formData,"name",e)},expression:"formData.name"}}),e(ot.Z,{attrs:{label:"Año:",type:"number",rules:t.empty,outlined:"",clearable:"",required:""},model:{value:t.formData.year,callback:function(e){t.$set(t.formData,"year",e)},expression:"formData.year"}})],1)],1)],1),e(q.h7,[e(A.Z),e(b.Z,{attrs:{color:"error",text:""},on:{click:function(e){t.dialogAdd=!1}}},[e("b",[t._v("Cerrar")])]),e(b.Z,{attrs:{color:"success",text:""},on:{click:function(e){return t.addDataRow()}}},[e("b",[t._v("Enviar")])])],1)],1)],1)},At=[],It={name:"CycleTableAdd",components:{MessageError:ft},data(){return{dialogAdd:!1,empty:[t=>(t||"").length>0||"Este campo es requerido"],formData:{}}},created(){},methods:{async addDataRow(){await this.$axios.post("/academic-cicle/",this.formData,{headers:{Authorization:`Bearer ${localStorage.token}`}}).then((t=>{this.dialogAdd=!1,this.$emit("loadTable"),this.$toast.success(t.data.content)})).catch((t=>{this.$queryError(t),this.$refs.messageError.showAlertError(t.response.data.content)}))},startDialog(){this.formData={},this.$nextTick((()=>{this.$refs.messageError&&this.$refs.messageError.hideAlertError()}))}}},Tt=It,Mt=(0,o.Z)(Tt,$t,At,!1,null,null,null),Rt=Mt.exports,Bt={name:"CycleMain",components:{TableCycle:wt,tableAdd:Rt},data(){return{itemsRouter:[{text:"Ciclo",disabled:!0},{text:"",disabled:!0}]}},methods:{loadTable(){this.$refs.tableData.loadTable()}}},Ot=Bt,qt=(0,o.Z)(Ot,X,Y,!1,null,null,null),Nt=qt.exports,Ft=a(266),Vt=a(7280),zt=a(352),Lt=function(){var t=this,e=t._self._c;return e(h.Z,{attrs:{id:"LoginMain"}},[e(S.Z,[e(x.Z,{staticClass:"fill-height",attrs:{fluid:""}},[e(F.Z,{attrs:{align:"center",justify:"center"}},[e(Ft.Z,{attrs:{cols:"12",sm:"10",md:"8",lg:"5"}},[e(Z.Z,{staticClass:"elevation-12"},[e(Vt.Z,[e(zt.Z,[e(F.Z,[e(Ft.Z,{attrs:{cols:"12",md:"8"}},[e(q.ZB,{staticClass:"mt-12"},[e("h1",{staticClass:"text-center display-2"},[t._v("Inicio de Sesión")]),e("h4",{staticClass:"text-center mt-4 mb-2"},[t._v(" Ingrese su DNI y contraseña ")]),t.AlertView?e(ct.Z,{staticClass:"text-left",attrs:{border:"left",color:"error",dismissible:"",icon:"mdi-alert-circle",type:"success"}},[t._v(t._s(t.AlertMessage))]):t._e(),e(nt.Z,[e(ot.Z,{attrs:{label:"Número de DNI",name:"dni",rules:[t=>!!t||"Este campo es requerido",t=>t&&t.length>=6||"La longitud mínima es de 6 caracteres"],"prepend-icon":"mdi-account",type:"text",color:"primary",clearable:""},model:{value:t.form.username,callback:function(e){t.$set(t.form,"username",e)},expression:"form.username"}}),e(ot.Z,{attrs:{label:"Contraseña",name:"password",rules:[t=>!!t||"Este campo es requerido",t=>t&&t.length>=6||"La longitud mínima es de 6 caracteres"],"prepend-icon":"mdi-lock",color:"primary","append-icon":t.showPassword?"mdi-eye":"mdi-eye-off",type:t.showPassword?"text":"password",hint:"Haz clic en el icono del ojo para mostrar u ocultar la contraseña",clearable:""},on:{"click:append":function(e){t.showPassword=!t.showPassword},keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.login()}},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1)],1),e("div",{staticClass:"text-center mb-lg-5"},[e(b.Z,{attrs:{color:"primary",dark:""},on:{click:function(e){return t.login()}}},[t._v("INGRESAR")])],1)],1),e(Ft.Z,{staticClass:"primary",attrs:{cols:"12",md:"4"}},[e(q.ZB,{staticClass:"white--text mt-lg-14 mt-md-14"},[e("h1",{staticClass:"text-center display-1"},[t._v("DATOS")]),e("h5",{staticClass:"text-center"},[t._v("Información importantes")])])],1)],1)],1)],1)],1)],1)],1)],1)],1)],1)},jt=[],Ut={name:"LoginMain",data(){return{showPassword:!1,AlertView:!1,AlertMessage:"",form:{username:"",password:""}}},methods:{async login(){this.AlertView=!1,await this.$axios.post("/auth/login",this.form).then((t=>{localStorage.setItem("token",t.data.token),localStorage.setItem("authenticated",!0),localStorage.setItem("key",t.data.key),localStorage.setItem("information",JSON.stringify(t.data.information)),Qr.push({name:"dashboard"})})).catch((t=>{this.AlertView=!0,this.AlertMessage=t.response.data.content}))}}},Gt=Ut,Ht=(0,o.Z)(Gt,Lt,jt,!1,null,null,null),Jt=Ht.exports,Kt=function(){var t=this,e=t._self._c;return e("div",[e(x.Z,{staticClass:"max-width-container",attrs:{fluid:""}},[e(Z.Z,{staticClass:"rounded-lg"},[e(q.EB,{staticClass:"display-1 primary--text"},[e("b",[t._v("MIS PAGOS")]),e(A.Z)],1),e(q.ZB,[e("MyPaymentsTable")],1)],1)],1)],1)},Qt=[],Wt=a(8893),Xt=a(2082),Yt=function(){var t=this,e=t._self._c;return e("div",[t.loader?e("loader",{ref:"loader",attrs:{object:"white",size:"10",speed:"1",bg:"#343a40",opacity:"30",name:"dots"}}):t._e(),0!=t.items.length?e("div",[e(Wt.Z,{attrs:{dense:""}},[e(V.Zy,{attrs:{group:"","hide-on-leave":""}},t._l(t.items,(function(a){return e(Xt.Z,{key:a.id,attrs:{color:a.status.color,small:"","fill-dot":""}},[e(ct.Z,{staticClass:"white--text",attrs:{value:!0,color:a.status.color}},[e("h3",[t._v(" "+t._s("Pago "+a.status.name+" - "+a.specialityOpening.specialityName)+" ")]),e("MyPaymentsInformation",{attrs:{paymentId:a.id}}),e(_.Z,{staticClass:"my-1"}),e("h4",[t._v("Fecha y Hora: "+t._s(t.convertDate(a.moment)))]),e("h4",[t._v("Monto: S/"+t._s(a.amount))])],1)],1)})),1)],1)],1):e("div",[e(ct.Z,{attrs:{dense:"",text:"",type:"info"}},[t._v(" No hay pagos. ")])],1)],1)},te=[],ee=a(8242),ae=a(5187),re=function(){var t=this,e=t._self._c;return e(st.Z,{attrs:{persistent:"","max-width":"800px"},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:r}){return[e(b.Z,t._g(t._b({attrs:{small:"",outlined:"",dark:""},on:{click:function(e){return t.loadInformationPay()}}},"v-btn",r,!1),a),[e(D.Z,{attrs:{left:""}},[t._v("mdi-eye-outline")]),t._v(" Ver Pago ")],1)]}}]),model:{value:t.dialogEdit,callback:function(e){t.dialogEdit=e},expression:"dialogEdit"}},[e(Z.Z,{staticClass:"rounded-lg"},[e(q.EB,{staticClass:"primary"},[e("span",{staticClass:"text-h5 white--text"},[t._v("Información de Voucher")])]),e(q.ZB,{staticClass:"mt-5"},[null!=t.dataPayment.specialityOpening?e(x.Z,[e(ct.Z,{attrs:{border:"left",color:"primary",text:""}},[e("b",{staticClass:"text-left"},[t._v(t._s(t.dataPayment.specialityOpening.year)),e(D.Z,{attrs:{color:"primary"}},[t._v("mdi-arrow-right-thin")]),t._v(" "+t._s(" CICLO "+t.dataPayment.specialityOpening.cycleName)),e(D.Z,{attrs:{color:"primary"}},[t._v("mdi-arrow-right-thin")]),t._v(t._s(t.dataPayment.specialityOpening.specialityName))],1)]),e(F.Z,[e(Ft.Z,{attrs:{cols:"12",lg:"6",md:"6"}},[e("h2",[t._v("Imagen de Voucher")]),null!=t.dataPayment.urlVoucher?e(N.Z,{attrs:{src:t.$axiosMinio+t.dataPayment.urlVoucher+`?t=${Date.now()}`,height:"450",contain:""}}):t._e()],1),e(Ft.Z,{attrs:{cols:"12",lg:"6",md:"6"}},[e(nt.Z,[e("h2",[t._v("Información del Voucher")]),e(ot.Z,{attrs:{label:"Fecha de pago",type:"date",readonly:t.stateReadOnly,required:""},model:{value:t.dataPayment.date,callback:function(e){t.$set(t.dataPayment,"date",e)},expression:"dataPayment.date"}}),e(ot.Z,{attrs:{label:"Banco",type:"text",readonly:t.stateReadOnly,required:""},model:{value:t.dataPayment.financialEntity.name,callback:function(e){t.$set(t.dataPayment.financialEntity,"name",e)},expression:"dataPayment.financialEntity.name"}}),e(ot.Z,{attrs:{label:"Número de operación",type:"text",readonly:t.stateReadOnly,required:""},model:{value:t.dataPayment.operatioNumber,callback:function(e){t.$set(t.dataPayment,"operatioNumber",e)},expression:"dataPayment.operatioNumber"}}),e(ot.Z,{attrs:{label:"Monto de Voucher",type:"text",readonly:t.stateReadOnly,required:""},model:{value:t.dataPayment.amount,callback:function(e){t.$set(t.dataPayment,"amount",e)},expression:"dataPayment.amount"}}),e("h2",{staticClass:"mb-3"},[t._v("Conceptos de Pago")]),e(ee.Z,{attrs:{"active-class":"primary--text",column:""}},[null!=t.dataPayment.payEnroll&&0!=t.dataPayment.payEnroll.amount?e(tt.Z,{attrs:{color:"success",outlined:""}},[e("b",[e(D.Z,{attrs:{left:""}},[t._v(" mdi-cash-multiple ")]),t._v(" "+t._s("Pago de Matrícula S/"+t.dataPayment.payEnroll.amount))],1)]):t._e(),null!=t.dataPayment.allPayPension?e("div",t._l(t.dataPayment.allPayPension,(function(a,r){return e(tt.Z,{key:r,attrs:{color:"info",outlined:""}},[e("b",[e(D.Z,{attrs:{left:""}},[t._v(" mdi-cash-multiple ")]),t._v(" "+t._s("Pago de Pensión "+a.reference+" S/"+a.amount))],1)])})),1):t._e()],1)],1)],1)],1),null!=t.dataPayment.allRemark?e("div",[0!=t.dataPayment.allRemark.length?e("div",[e("h2",{staticClass:"mt-3"},[t._v("Mensajes")]),t._l(t.dataPayment.allRemark,(function(a,r){return e(C.Z,{key:r,attrs:{"two-line":""}},[e(E.km,[e(E.V9,[t._v(t._s(a.content))]),e(E.oZ,[t._v(t._s(a.email))])],1),e(ae.Z,[t._v(t._s(a.moment.substring(0,10)+" / "+a.moment.substring(11,19)))])],1)})),e(_.Z)],2):e("div",[e("h3",[t._v("Sin mensajes")])])]):t._e()],1):t._e()],1),e(q.h7,[e(A.Z),e(b.Z,{attrs:{color:"success",text:""},on:{click:function(e){t.dialogEdit=!1}}},[e("b",[t._v("Volver")])])],1)],1)],1)},se=[],ne={name:"MyPaymentsInformation",props:["paymentId"],data(){return{dialogEdit:!1,stateReadOnly:!0,dataPayment:{}}},created(){},methods:{async loadInformationPay(){await this.$axios.get("/requisition-pay/"+this.paymentId+"/my",{headers:{Authorization:`Bearer ${localStorage.token}`}}).then((t=>{this.dataPayment=t.data})).catch((t=>{this.$queryError(t)}))}}},oe=ne,ie=(0,o.Z)(oe,re,se,!1,null,null,null),le=ie.exports,ce={name:"MyPaymentsTable",components:{MyPaymentsInformation:le},data(){return{loader:!1,interval:null,items:[],nonce:2}},created(){this.loadRequisitionPay()},methods:{async loadRequisitionPay(){this.loader=!0,await this.$axios.get("/requisition-pay/my",{headers:{Authorization:`Bearer ${localStorage.token}`}}).then((t=>{this.items=t.data.allItems,this.loader=!1})).catch((t=>{this.$queryError(t)}))},convertDate(t){let e=t.substring(0,10),a=t.substring(11,19);return e+" "+a}}},de=ce,ue=(0,o.Z)(de,Yt,te,!1,null,null,null),me=ue.exports,pe={name:"MyPaymentsMain",components:{MyPaymentsTable:me},data(){return{}},created(){},methods:{}},he=pe,fe=(0,o.Z)(he,Kt,Qt,!1,null,null,null),ye=fe.exports,ge=function(){var t=this,e=t._self._c;return e(x.Z,{staticClass:"max-width-container",attrs:{fluid:""}},[e(Z.Z,{staticClass:"rounded-lg"},[e(q.EB,{staticClass:"display-1 primary--text"},[e("b",[t._v("PAGOS RECIBIDOS")]),e(A.Z)],1),e(q.ZB,[e("SentPaymentsTable")],1)],1)],1)},ve=[],be=function(){var t=this,e=t._self._c;return e("div",[e(et.Z,{staticClass:"elevation-1 mt-3 rounded-lg",attrs:{headers:t.headers,items:t.desserts},scopedSlots:t._u([{key:"item.index",fn:function({item:a}){return[e("b",[t._v(t._s(t.getIndex(a)))])]}},{key:"item.lastName",fn:function({item:e}){return[t._v(" "+t._s(e.person.lastnameFather+" "+e.person.lastnameMother+", "+e.person.name)+" ")]}},{key:"item.date",fn:function({item:a}){return[e(tt.Z,{attrs:{color:"info",outlined:""}},[e(D.Z,{attrs:{left:""}},[t._v(" mdi-calendar-range ")]),t._v(t._s(a.moment.substring(0,10))+" ")],1)]}},{key:"item.hour",fn:function({item:a}){return[e(tt.Z,{attrs:{color:"blue-grey darken-2",outlined:""}},[e(D.Z,{attrs:{left:""}},[t._v(" mdi-timer-outline ")]),t._v(" "+t._s(a.moment.substring(11,19))+" ")],1)]}},{key:"item.view",fn:function({item:a}){return[e(b.Z,{attrs:{color:"success",fab:"","x-small":""},on:{click:function(e){return t.goToValidate(a.id)}}},[e(D.Z,[t._v("mdi-eye-outline ")])],1)]}}])})],1)},Ze=[],xe={name:"SentPaymentsTable",data(){return{headers:[{text:"#",align:"start",sortable:!1,value:"index"},{text:"Nombres",value:"lastName"},{text:"Especialidad",value:"specialityOpening.specialityName"},{text:"Fecha",value:"date"},{text:"Hora",value:"hour"},{text:"Ver",value:"view"}],desserts:[]}},created(){this.loadTable()},methods:{async loadTable(){await this.$axios.get("/requisition-pay/sent?perPage=100",{headers:{Authorization:`Bearer ${localStorage.token}`}}).then((t=>{this.desserts=t.data.allItems})).catch((t=>{this.$queryError(t)}))},getIndex(t){const e=this.desserts.indexOf(t);return e+1},goToValidate(t){Qr.push({name:"validate",params:{idPayment:t}})}}},_e=xe,De=(0,o.Z)(_e,be,Ze,!1,null,null,null),ke=De.exports,Ce={name:"SentPaymentsMain",components:{SentPaymentsTable:ke},data(){return{}},created(){},methods:{}},Ee=Ce,Pe=(0,o.Z)(Ee,ge,ve,!1,null,null,null),Se=Pe.exports,we=function(){var t=this,e=t._self._c;return e(x.Z,{staticClass:"max-width-container",attrs:{fluid:""}},[e(Z.Z,{staticClass:"rounded-lg"},[e(q.EB,{staticClass:"display-1 primary--text"},[e("b",[t._v("FORMULARIO DE PAGO")]),e(A.Z)],1),e(q.ZB,[e("PaymentStepper")],1)],1)],1)},$e=[],Ae=a(1625),Ie=a(9481),Te=a(535),Me=a(5157),Re=a(8491),Be=function(){var t=this,e=t._self._c;return e("div",[e(Te.Z,{attrs:{vertical:""},model:{value:t.flag,callback:function(e){t.flag=e},expression:"flag"}},[e(Re.Z,{attrs:{complete:t.flag>1,step:"1"}},[t._v(" Seleccionar Especialidad ")]),e(Me.Z,{attrs:{step:"1"}},[e(Z.Z,{staticClass:"mb-12",attrs:{color:"grey lighten-4"}},[e(q.ZB,[t.AlertView?e(ct.Z,{staticClass:"text-left",attrs:{border:"left",dismissible:"",text:"",icon:"mdi-alert-circle",type:"info"}},[t._v("Tiene un pago pendiente de revisión en esta Especialidad "),e(b.Z,{attrs:{outlined:"",small:"",color:"info"},on:{click:function(e){return t.$router.push({name:"myPayments"})}}},[e(D.Z,{attrs:{left:""}},[t._v("mdi-eye-outline ")]),e("b",[t._v("Mis Pagos")])],1)],1):t._e(),e(Ie.Z,{attrs:{items:t.specialties,"item-text":"specialityName","item-value":"id",label:"Seleccione la Especialidad","background-color":"white","prepend-inner-icon":"mdi-pencil-plus-outline",outlined:"","hide-details":"",chips:"","small-chips":""},model:{value:t.selectedSpecialty,callback:function(e){t.selectedSpecialty=e},expression:"selectedSpecialty"}})],1)],1),e(b.Z,{attrs:{color:"info",disabled:""==t.selectedSpecialty},on:{click:function(e){return t.verifyPayment()}}},[e("b",[t._v("CONTINUAR")])])],1),e(Re.Z,{attrs:{complete:t.flag>2,step:"2"}},[t._v(" Subir Imagen y datos de Voucher ")]),e(Me.Z,{attrs:{step:"2"}},[e(Z.Z,{staticClass:"mb-12",attrs:{color:"grey lighten-4"}},[e(q.ZB,[e(Ae.Z,{attrs:{accept:"image/*",label:"Imagen de Voucher","background-color":"white","hide-details":"",outlined:"",chips:""},on:{change:t.previewImage},model:{value:t.selectedImage,callback:function(e){t.selectedImage=e},expression:"selectedImage"}}),e("br"),null!=t.selectedImage?e(F.Z,[e(Ft.Z,{attrs:{lg:"6",sm:"12"}},[e("h2",[t._v("Imagen de Voucher")]),t.previewURL?e(N.Z,{staticClass:"mt-5",attrs:{src:t.previewURL,height:"400",contain:""}}):t._e()],1),e(Ft.Z,{attrs:{lg:"6",sm:"12"}},[e(nt.Z,[e("h2",[t._v("Información del Voucher")]),e(ot.Z,{staticClass:"mt-5",attrs:{rules:t.empty,"error-messages":t.date?"":"Campo requerido",label:"Ingrese Fecha de pago",type:"date","background-color":"white",outlined:"",clearable:"",required:""},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}}),e(Ie.Z,{attrs:{rules:t.empty,"error-messages":t.finalcialId?"":"Campo requerido",items:t.entities,"item-text":"text","item-value":"value",label:"Seleccione Banco","background-color":"white",outlined:"",chips:"","small-chips":""},model:{value:t.finalcialId,callback:function(e){t.finalcialId=e},expression:"finalcialId"}}),e(ot.Z,{attrs:{rules:t.empty,"error-messages":t.operationNumber?"":"Campo requerido",label:"Número de operación",type:"number","background-color":"white",outlined:"",clearable:"",required:""},model:{value:t.operationNumber,callback:function(e){t.operationNumber=e},expression:"operationNumber"}}),e(ot.Z,{attrs:{rules:t.empty,"error-messages":t.amount?"":"Campo requerido",label:"Monto de Voucher",type:"number","background-color":"white",outlined:"",clearable:"",required:""},model:{value:t.amount,callback:function(e){t.amount=e},expression:"amount"}}),e(ot.Z,{attrs:{label:"Comentario",type:"text",messages:"* Opcional","background-color":"white",outlined:"",clearable:"",required:""},model:{value:t.comment,callback:function(e){t.comment=e},expression:"comment"}})],1)],1)],1):t._e()],1)],1),e(b.Z,{attrs:{color:"info",disabled:null==t.selectedImage||""==t.date||null==t.date||""==t.finalcialId||0==t.operationNumber||0==t.amount||null==t.operationNumber||null==t.amount},on:{click:function(e){t.flag=3,t.loadPayments()}}},[e("b",[t._v("CONTINUAR")])]),e(b.Z,{attrs:{color:"primary",text:""},on:{click:function(e){t.flag=1}}},[e("b",[t._v("VOLVER")])])],1),e(Re.Z,{attrs:{complete:t.flag>3,step:"3"}},[t._v(" Calculo de conceptos de pago ")]),e(Me.Z,{attrs:{step:"3"}},[e(Z.Z,{staticClass:"mb-12",attrs:{color:"grey lighten-4"}},[e(q.ZB,[e(ct.Z,{attrs:{type:"success"}},[e("b",[t._v("MONTO DE VOUCHER: S/"+t._s(t.sendData.amount))])]),t._l(t.viewCalculatePayments,(function(a,r){return e(ct.Z,{key:r,attrs:{type:"info",outlined:"",text:"",dense:""}},[e("b",[t._v(t._s(a.field))])])}))],2)],1),e(b.Z,{attrs:{color:"info",disabled:t.payments.allDebtPension==[]},on:{click:function(e){t.flag=4}}},[e("b",[t._v("CONTINUAR")])]),e(b.Z,{attrs:{color:"primary",text:""},on:{click:function(e){t.flag=2}}},[e("b",[t._v("VOLVER")])])],1),e(Re.Z,{attrs:{step:"4"}},[t._v(" Verificar información llenada")]),e(Me.Z,{attrs:{step:"4"}},[e(Z.Z,{staticClass:"mb-12",attrs:{color:"grey lighten-4"}},[e(q.ZB,[e(x.Z,[e(F.Z,[e("h3",[t._v("ESPECIALIDAD")])]),e(F.Z,[e(Ft.Z,[e(Ie.Z,{attrs:{label:"Especialidad",value:t.selectedSpecialty,items:t.specialties,"item-text":"specialityName","item-value":"id","background-color":"white","hide-details":"",filled:"",shaped:"",readonly:""}})],1)],1),e(F.Z,[e("h3",[t._v("DATOS DE VOUCHER")])]),e(F.Z,[e(Ft.Z,[null!=t.selectedImage?e(ot.Z,{attrs:{label:"Voucher","background-color":"white",value:t.selectedImage.name,readonly:"",filled:"",shaped:""}}):t._e(),e(ot.Z,{attrs:{label:"Fecha de pago","background-color":"white",value:t.date,readonly:"",filled:"",shaped:""}}),e(Ie.Z,{attrs:{items:t.entities,"item-text":"text","item-value":"value",label:"Banco",value:t.finalcialId,"background-color":"white",readonly:"",filled:"",shaped:""}}),e(ot.Z,{attrs:{label:"Número de operación","background-color":"white",value:t.operationNumber,readonly:"",filled:"",shaped:""}}),e(ot.Z,{attrs:{label:"Monto de voucher","background-color":"white",value:t.sendData.amount,readonly:"",filled:"",shaped:""}}),e(ot.Z,{attrs:{label:"Comentario","background-color":"white",value:t.comment,"hide-details":"",readonly:"",filled:"",shaped:""}})],1)],1),e(F.Z,[e("h3",[t._v("CONCEPTOS DE PAGO")])]),null!=t.payments.debtEnroll?e(F.Z,[0!=t.payments.debtEnroll.residue?e(Ft.Z,[e(ot.Z,{attrs:{label:"Monto de pago de Matrícula","background-color":"white",value:t.sendData.payEnroll.amount,"hide-details":"",readonly:"",filled:"",shaped:""}})],1):t._e()],1):t._e(),t._l(t.sendData.allPayPension,(function(a,r){return e(F.Z,{key:r},[e(Ft.Z,[e(Ie.Z,{attrs:{label:"Pensión",value:a.paymentScheduleId,items:t.payments.allDebtPension,"item-text":"reference","item-value":"id","background-color":"white","hide-details":"",filled:"",shaped:"",readonly:""}})],1),e(Ft.Z,[e(ot.Z,{attrs:{label:"Monto de pago de Pensión","background-color":"white",value:a.amount,"hide-details":"",readonly:"",filled:"",shaped:""}})],1)],1)}))],2)],1)],1),e(b.Z,{attrs:{color:"success"},on:{click:t.sendPayment}},[e("b",[t._v("ENVIAR")])]),e(b.Z,{attrs:{color:"primary",text:""},on:{click:function(e){t.flag=3}}},[e("b",[t._v("VOLVER")])])],1)],1)],1)},Oe=[],qe={data(){return{flag:1,selectedSpecialty:"",specialties:[],entities:[],payments:{},selectedImage:null,previewURL:null,AlertView:!1,empty:[t=>!!t||"Campo requerido"],file:null,amount:0,date:"",operationNumber:0,finalcialId:"",comment:"",sendData:{allPayPension:[],amount:0,payEnroll:{amount:0}},viewCalculatePayments:[]}},created(){this.loadSpecialties(),this.getEntities()},methods:{async getEntities(){await this.$axios.get("/financial-entity",{headers:{Authorization:`Bearer ${localStorage.token}`}}).then((t=>{this.entities=t.data})).catch((t=>{this.$queryError(t)}))},async verifyPayment(){this.AlertView=!1,await this.$axios.get("/enrollment-speciality/"+this.selectedSpecialty+"/payment-enabled",{headers:{Authorization:`Bearer ${localStorage.token}`}}).then((t=>{t.data.enabled?this.flag=2:(this.AlertView=!0,this.$toast.warning("No puede continuar con la acción"))})).catch((t=>{this.$queryError(t)}))},async uploadFile(){return new Promise(((t,e)=>{var a=new FormData;a.append("file",this.file),this.$axiosFile.post("/storage/upload",a,{headers:{Authorization:`Bearer ${localStorage.token}`,"Content-Type":"multipart/form-data"}}).then((e=>{t(e.data.content)})).catch((t=>{e(t)}))}))},async loadSpecialties(){await this.$axios.get("/enrollment-speciality/my",{headers:{Authorization:`Bearer ${localStorage.token}`}}).then((t=>{this.specialties=t.data.allItems})).catch((t=>{this.$queryError(t)}))},async loadPayments(){await this.$axios.get("/enrollment-speciality/"+this.selectedSpecialty+"/payment-reason",{headers:{Authorization:`Bearer ${localStorage.token}`}}).then((t=>{this.payments=t.data,this.calculatePayments()})).catch((t=>{this.$queryError(t)}))},previewImage(t){if(this.file=t,this.selectedImage){const t=new FileReader;t.onload=t=>{this.previewURL=t.target.result},t.readAsDataURL(this.selectedImage)}},calculatePayments(){let t=this.amount;if(this.sendData.amount=0,this.sendData.allPayPension=[],this.sendData.payEnroll={},this.viewCalculatePayments=[],null===this.payments.debtEnroll&&(this.payments.debtEnroll={residue:0}),t<0)this.$toast.error("Error de monto");else if(this.sendData.amount=t,t<=this.payments.debtEnroll.residue)this.sendData.payEnroll.amount=t,0!=this.payments.debtEnroll.residue&&this.viewCalculatePayments.push({field:"Matrícula: Esta pagando S/"+this.sendData.payEnroll.amount+" --\x3e Debe aun "+(this.payments.debtEnroll.residue-t)});else{this.sendData.payEnroll.amount=this.payments.debtEnroll.residue,t-=this.payments.debtEnroll.residue,0!=this.payments.debtEnroll.residue&&this.viewCalculatePayments.push({field:"Matrícula: Esta pagando S/"+this.sendData.payEnroll.amount}),this.payments.allDebtPension.sort(((t,e)=>t.reference-e.reference));for(let e=0;e<this.payments.allDebtPension.length;e++){if(0==t)break;if(t<=this.payments.allDebtPension[e].residue){this.sendData.allPayPension.push({amount:t,paymentScheduleId:this.payments.allDebtPension[e].id}),this.viewCalculatePayments.push({field:"Pensión "+this.payments.allDebtPension[e].reference+": Esta pagando S/"+t+" --\x3e Debe aun S/"+(this.payments.allDebtPension[e].residue-t)}),this.amountAux=0;break}this.sendData.allPayPension.push({amount:this.payments.allDebtPension[e].residue,paymentScheduleId:this.payments.allDebtPension[e].id}),t-=this.payments.allDebtPension[e].residue,this.viewCalculatePayments.push({field:"Pensión "+this.payments.allDebtPension[e].reference+": Esta pagando S/"+this.payments.allDebtPension[e].residue})}}},sendDataPayment(t){return new Promise(((e,a)=>{this.$axios.post("/requisition-pay",{allPayPension:this.sendData.allPayPension,amount:this.sendData.amount,coment:this.comment,date:this.date,enrollmentSpecialityId:this.selectedSpecialty,financialEntityId:this.finalcialId,operationNumber:this.operationNumber,payEnroll:this.sendData.payEnroll,urlVoucher:t},{headers:{Authorization:`Bearer ${localStorage.token}`}}).then((t=>{e(t)})).catch((e=>{this.deleteFilePayment(t),this.$toast.error(e.response.data.content),a(e)}))}))},async deleteFilePayment(t){await this.$axiosFile.delete("/storage/remove/"+t,{headers:{Authorization:`Bearer ${localStorage.token}`}}).catch((t=>{this.$queryError(t)}))},sendPayment(){this.uploadFile().then((t=>this.sendDataPayment(t))).then((()=>{this.$toast.success("Pago realizado satisfactoriamente"),Qr.push({name:"myPayments"})})).catch((()=>{this.flag=1,this.$toast.error("Ha ocurrido un error al subir la información")}))}}},Ne=qe,Fe=(0,o.Z)(Ne,Be,Oe,!1,null,null,null),Ve=Fe.exports,ze={name:"PaymentMain",components:{PaymentStepper:Ve},data(){return{}},created(){},methods:{}},Le=ze,je=(0,o.Z)(Le,we,$e,!1,null,null,null),Ue=je.exports,Ge=function(){var t=this,e=t._self._c;return e(x.Z,{staticClass:"max-width-container",attrs:{fluid:""}},[e(W.Z,{attrs:{items:t.itemsRouter,large:""}}),e(Z.Z,{staticClass:"rounded-lg"},[e(q.EB,{staticClass:"display-1 primary--text"},[e("b",[t._v('ESPECIALIDADES DE "'+t._s(t.$route.params.yearCycle+" CICLO "+t.$route.params.nameCycle.toUpperCase())+'"')]),e(A.Z),e("TableAdd",{on:{loadTable:function(e){return t.loadTable()}}})],1),e(q.ZB,[e("TableSpecialty",{ref:"tableData"})],1)],1)],1)},He=[],Je=function(){var t=this,e=t._self._c;return e("div",[e(et.Z,{staticClass:"elevation-1 mt-3 rounded-lg",attrs:{headers:t.headers,items:t.desserts},scopedSlots:t._u([{key:"item.index",fn:function({item:a}){return[e("b",[t._v(t._s(t.getIndex(a)))])]}},{key:"item.state",fn:function({item:a}){return[e(tt.Z,{attrs:{color:"green",dark:""}},[e("b",[t._v(t._s(a.calories)+"ACTIVO")])])]}},{key:"item.register",fn:function({item:t}){return[e("registerMass",{attrs:{specialtyRow:t}})]}},{key:"item.actions",fn:function({item:a}){return[e("tableEdit",{attrs:{specialtyRow:a},on:{loadTable:function(e){return t.loadTable()}}}),e("tableDelete",{attrs:{specialtyRow:a},on:{loadTable:function(e){return t.loadTable()}}})]}}])})],1)},Ke=[],Qe=a(1030),We=function(){var t=this,e=t._self._c;return e(st.Z,{attrs:{persistent:"","max-width":"600px"},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:r}){return[e(b.Z,t._g(t._b({attrs:{fab:"","x-small":"",color:"warning"},on:{click:function(e){return t.getDataRow()}}},"v-btn",r,!1),a),[e(D.Z,[t._v(" mdi-pencil ")])],1)]}}]),model:{value:t.dialogEdit,callback:function(e){t.dialogEdit=e},expression:"dialogEdit"}},[e(Z.Z,{staticClass:"rounded-lg"},[e(q.EB,{staticClass:"primary"},[e("span",{staticClass:"text-h5 white--text"},[t._v("Editar Especialidad")])]),e(q.ZB,{staticClass:"mt-5"},[e(x.Z,[e("MessageError",{ref:"messageError"}),e(nt.Z,[e(st.Z,{ref:"dialogStart",attrs:{"return-value":t.formData.startDate,persistent:"",width:"290px"},on:{"update:returnValue":function(e){return t.$set(t.formData,"startDate",e)},"update:return-value":function(e){return t.$set(t.formData,"startDate",e)}},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:r}){return[e(ot.Z,t._g(t._b({attrs:{label:"Fecha de inicio:","prepend-icon":"mdi-calendar",rules:t.empty,readonly:"",outlined:"",clearable:""},model:{value:t.formData.startDate,callback:function(e){t.$set(t.formData,"startDate",e)},expression:"formData.startDate"}},"v-text-field",r,!1),a))]}}]),model:{value:t.modalStart,callback:function(e){t.modalStart=e},expression:"modalStart"}},[e(Qe.Z,{attrs:{color:"primary",scrollable:""},model:{value:t.formData.startDate,callback:function(e){t.$set(t.formData,"startDate",e)},expression:"formData.startDate"}},[e(A.Z),e(b.Z,{attrs:{text:"",color:"primary"},on:{click:function(e){t.modalStart=!1}}},[t._v(" Cancel ")]),e(b.Z,{attrs:{text:"",color:"primary"},on:{click:function(e){return t.$refs.dialogStart.save(t.formData.startDate)}}},[t._v(" OK ")])],1)],1),e(st.Z,{ref:"dialogFinal",attrs:{"return-value":t.formData.finalDate,persistent:"",width:"290px"},on:{"update:returnValue":function(e){return t.$set(t.formData,"finalDate",e)},"update:return-value":function(e){return t.$set(t.formData,"finalDate",e)}},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:r}){return[e(ot.Z,t._g(t._b({attrs:{label:"Fecha de fin:","prepend-icon":"mdi-calendar",rules:t.empty,readonly:"",outlined:"",clearable:""},model:{value:t.formData.finalDate,callback:function(e){t.$set(t.formData,"finalDate",e)},expression:"formData.finalDate"}},"v-text-field",r,!1),a))]}}]),model:{value:t.modalFinal,callback:function(e){t.modalFinal=e},expression:"modalFinal"}},[e(Qe.Z,{attrs:{color:"primary",scrollable:""},model:{value:t.formData.finalDate,callback:function(e){t.$set(t.formData,"finalDate",e)},expression:"formData.finalDate"}},[e(A.Z),e(b.Z,{attrs:{text:"",color:"primary"},on:{click:function(e){t.modalFinal=!1}}},[t._v(" Cancel ")]),e(b.Z,{attrs:{text:"",color:"primary"},on:{click:function(e){return t.$refs.dialogFinal.save(t.formData.finalDate)}}},[t._v(" OK ")])],1)],1),e(ot.Z,{attrs:{label:"Costo de Matrícula","prepend-icon":"mdi-alpha-m-circle-outline",type:"number",outlined:"",clearable:"",required:""},model:{value:t.formData.enrollCost,callback:function(e){t.$set(t.formData,"enrollCost",e)},expression:"formData.enrollCost"}}),e(ot.Z,{attrs:{label:"Costo de Pensión","prepend-icon":"mdi-alpha-p-circle-outline",type:"number",outlined:"",clearable:"",required:""},model:{value:t.formData.pensionCost,callback:function(e){t.$set(t.formData,"pensionCost",e)},expression:"formData.pensionCost"}}),e(ot.Z,{attrs:{label:"Cantidad de cursos","prepend-icon":"mdi-animation-outline",type:"number",outlined:"",clearable:"",required:""},model:{value:t.formData.numberCourses,callback:function(e){t.$set(t.formData,"numberCourses",e)},expression:"formData.numberCourses"}})],1)],1)],1),e(q.h7,[e(A.Z),e(b.Z,{attrs:{color:"error",text:""},on:{click:function(e){t.dialogEdit=!1}}},[e("b",[t._v("Cerrar")])]),e(b.Z,{attrs:{color:"success",text:""},on:{click:function(e){return t.updateDataRow()}}},[e("b",[t._v("Enviar")])])],1)],1)],1)},Xe=[],Ye={name:"SpecialtyTableCycle",props:["specialtyRow"],components:{MessageError:ft},data(){return{modalStart:!1,modalFinal:!1,dialogEdit:!1,empty:[t=>(t||"").length>0||"Este campo es requerido"],formData:{}}},created(){},methods:{getDataRow(){this.getDataSpecialty(),this.$nextTick((()=>{this.$refs.messageError&&this.$refs.messageError.hideAlertError()}))},async getDataSpecialty(){await this.$axios.get("/academic-cicle/"+this.$route.params.idCycle+"/speciality/"+this.specialtyRow.id,{headers:{Authorization:`Bearer ${localStorage.token}`}}).then((t=>{this.formData={enrollCost:t.data.enrollCost,finalDate:t.data.finalDate,pensionCost:t.data.pensionCost,startDate:t.data.startDate,numberCourses:t.data.numberCourses}})).catch((t=>{this.$queryError(t)}))},async updateDataRow(){await this.$axios.put("/academic-cicle/"+this.$route.params.idCycle+"/speciality/"+this.specialtyRow.id,this.formData,{headers:{Authorization:`Bearer ${localStorage.token}`}}).then((t=>{this.dialogEdit=!1,this.$emit("loadTable"),this.$toast.success(t.data.content)})).catch((t=>{this.$queryError(t),this.$refs.messageError.showAlertError(t.response.data.content)}))}}},ta=Ye,ea=(0,o.Z)(ta,We,Xe,!1,null,null,null),aa=ea.exports,ra=function(){var t=this,e=t._self._c;return e(st.Z,{attrs:{persistent:"","max-width":"550"},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:r}){return[e(b.Z,t._g(t._b({staticClass:"ml-2",attrs:{fab:"","x-small":"",color:"error"}},"v-btn",r,!1),a),[e(D.Z,[t._v(" mdi-delete ")])],1)]}}]),model:{value:t.dialogDelete,callback:function(e){t.dialogDelete=e},expression:"dialogDelete"}},[e(Z.Z,[e(q.EB,{staticClass:"text-h5"},[t._v(" ¿Esta seguro de eliminar a "+t._s(t.specialtyRow.name)+"? ")]),e(q.ZB,[t._v("La información sera eliminada permanentemente.")]),e(q.h7,[e(A.Z),e(b.Z,{attrs:{color:"error",text:""},on:{click:function(e){t.dialogDelete=!1}}},[e("b",[t._v("Cancelar")])]),e(b.Z,{attrs:{color:"success",text:""},on:{click:function(e){return t.deleteDataRow()}}},[e("b",[t._v("Aceptar")])])],1)],1)],1)},sa=[],na={name:"SpecialtyTableDelete",props:["specialtyRow"],data(){return{dialogDelete:!1}},created(){},methods:{async deleteDataRow(){await this.$axios.delete("/academic-cicle/"+this.$route.params.idCycle+"/speciality/"+this.specialtyRow.id,{headers:{Authorization:`Bearer ${localStorage.token}`}}).then((t=>{this.dialogDelete=!1,this.$emit("loadTable"),this.$toast.success(t.data.content)})).catch((t=>{this.$queryError(t),console.log(t)}))}}},oa=na,ia=(0,o.Z)(oa,ra,sa,!1,null,null,null),la=ia.exports,ca=function(){var t=this,e=t._self._c;return e(st.Z,{attrs:{persistent:"","max-width":"1000px"},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:r}){return[e(tt.Z,t._g(t._b({attrs:{color:"success",link:"",outlined:""},on:{click:function(e){return t.startDialog()}}},"v-chip",r,!1),a),[e(D.Z,{attrs:{left:""}},[t._v(" mdi-account-plus ")]),e("b",[t._v("Registro")])],1)]}}]),model:{value:t.dialogRegisterMass,callback:function(e){t.dialogRegisterMass=e},expression:"dialogRegisterMass"}},[e(Z.Z,{staticClass:"rounded-lg"},[e(q.EB,{staticClass:"primary"},[e("span",{staticClass:"text-h5 white--text"},[t._v("Registro Masivo")])]),e(q.ZB,{staticClass:"mt-5"},[e(x.Z,[e(ct.Z,{staticClass:"text-left",attrs:{border:"left",text:"",icon:"mdi-alert-circle",type:"info"}},[e("b",[t._v("Puede eliminar filas de datos en el campo de acciones, si hay un error se presenta en el primer dato de la tabla.")])]),e(Ae.Z,{attrs:{label:"Archivo Excel"},nativeOn:{change:function(e){return t.handleFileUpload.apply(null,arguments)}}}),e("MessageError",{ref:"messageError"}),e(et.Z,{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.formData,"items-per-page":10},scopedSlots:t._u([{key:"item",fn:function({item:a}){return[e("tr",t._l(a,(function(r,s){return e("td",{key:s},["id"!==s?["actions"!==s?[e("input",{directives:[{name:"model",rawName:"v-model",value:a[s],expression:"item[key]"}],attrs:{size:a[s].toString().length+1,type:"text"},domProps:{value:a[s]},on:{input:function(e){e.target.composing||t.$set(a,s,e.target.value)}}})]:[e(b.Z,{attrs:{icon:""},on:{click:function(e){return t.deleteRow(a.id)}}},[e(D.Z,[t._v("mdi-delete")])],1)]]:t._e()],2)})),0)]}}])})],1)],1),e(q.h7,[e(A.Z),e(b.Z,{attrs:{color:"error",text:""},on:{click:function(e){t.dialogRegisterMass=!1}}},[e("b",[t._v("Cerrar")])]),e(b.Z,{attrs:{color:"success",text:""},on:{click:function(e){return t.registerMass()}}},[e("b",[t._v("Registrar datos")])])],1)],1)],1)},da=[],ua=(a(3767),a(8585),a(8696),a(4105)),ma={name:"RegisterMass",props:["specialtyRow"],components:{MessageError:ft},data(){return{dialogRegisterMass:!1,headers:[{text:"#",value:"id"},{text:"Dni",value:"dni"},{text:"Nombre",value:"name"},{text:"Paterno",value:"lastnameFather"},{text:"Materno",value:"lastnameMother"},{text:"Correo",value:"email"},{text:"Celular",value:"phone"},{text:"Acciones",value:"actions",sortable:!1}],formData:[]}},created(){},methods:{async registerMass(){this.$refs.messageError.hideAlertError();let t=this.formData.slice();for(let a=0;a<t.length;a++)try{await this.registerRow(t[a]),this.formData.shift()}catch(e){return void this.$toast.error("Error al registrar estudiante.")}this.dialogRegisterMass=!1,this.$toast.success("Se finalizo correctamente el registro masivo")},async registerRow(t){return new Promise(((e,a)=>{this.$axios.post("/academic-cicle/"+this.$route.params.idCycle+"/speciality/"+this.specialtyRow.id+"/enroll",t,{headers:{Authorization:`Bearer ${localStorage.token}`}}).then((a=>{this.$toast.success(a.data.content+" para "+t.dni),e(a)})).catch((t=>{this.$refs.messageError.showAlertError(t.response.data.content),a(t)}))}))},handleFileUpload(t){const e=t.target.files[0],a=new FileReader;a.onload=t=>{const e=new Uint8Array(t.target.result),a=(0,ua.ij)(e,{type:"array"}),r=a.Sheets[a.SheetNames[0]],s=ua.P6.sheet_to_json(r,{header:1});this.validateData(s)},a.readAsArrayBuffer(e)},validateData(t){let e=[];if(t.length>0){for(let a=1;a<t.length;a++){if(null==t[a][0])break;e.push({id:a,dni:t[a][0],name:t[a][1],lastnameFather:t[a][2],lastnameMother:t[a][3],email:t[a][4],phone:t[a][5],actions:""})}this.formData=e}},startDialog(){this.formData=[],this.$nextTick((()=>{this.$refs.messageError&&this.$refs.messageError.hideAlertError()}))},deleteRow(t){const e=this.formData.findIndex((e=>e.id===t));-1!==e&&this.formData.splice(e,1)}}},pa=ma,ha=(0,o.Z)(pa,ca,da,!1,null,null,null),fa=ha.exports,ya={name:"TableSpecialty",components:{tableEdit:aa,tableDelete:la,registerMass:fa},data(){return{dialogDelete:!1,headers:[{text:"#",align:"start",sortable:!1,value:"index"},{text:"Nombre",value:"name"},{text:"#Cursos",value:"numberCourses"},{text:"Matrícula",value:"enrollCost"},{text:"Pensión",value:"pensionCost"},{text:"Estado",value:"state"},{text:"Registro",value:"register"},{text:"Acciones Especialidad",value:"actions"}],desserts:[]}},created(){this.loadTable()},methods:{async loadTable(){await this.$axios.get("/academic-cicle/"+this.$route.params.idCycle+"/speciality",{headers:{Authorization:`Bearer ${localStorage.token}`}}).then((t=>{this.desserts=t.data.allItems})).catch((t=>{this.$queryError(t)}))},getIndex(t){const e=this.desserts.indexOf(t);return e+1}}},ga=ya,va=(0,o.Z)(ga,Je,Ke,!1,null,null,null),ba=va.exports,Za=a(120),xa=function(){var t=this,e=t._self._c;return e(st.Z,{attrs:{persistent:"","max-width":"600px"},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:r}){return[e(b.Z,t._g(t._b({attrs:{color:"success",rounded:""},on:{click:function(e){return t.startDialog()}}},"v-btn",r,!1),a),[e(D.Z,{attrs:{left:""}},[t._v(" mdi-pencil-plus ")]),e("b",[t._v("Agregar")])],1)]}}]),model:{value:t.dialogAdd,callback:function(e){t.dialogAdd=e},expression:"dialogAdd"}},[e(Z.Z,{staticClass:"rounded-lg"},[e(q.EB,{staticClass:"success"},[e("span",{staticClass:"text-h5 white--text"},[t._v("Agregar Especialidad")])]),e(q.ZB,{staticClass:"mt-5"},[e(x.Z,[e("MessageError",{ref:"messageError"}),e(nt.Z,[e(st.Z,{ref:"dialogStart",attrs:{"return-value":t.formData.data.startDate,persistent:"",width:"290px"},on:{"update:returnValue":function(e){return t.$set(t.formData.data,"startDate",e)},"update:return-value":function(e){return t.$set(t.formData.data,"startDate",e)}},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:r}){return[e(ot.Z,t._g(t._b({attrs:{label:"Fecha de inicio:","prepend-icon":"mdi-calendar",rules:t.empty,readonly:"",outlined:"",clearable:""},model:{value:t.formData.data.startDate,callback:function(e){t.$set(t.formData.data,"startDate",e)},expression:"formData.data.startDate"}},"v-text-field",r,!1),a))]}}]),model:{value:t.modalStart,callback:function(e){t.modalStart=e},expression:"modalStart"}},[e(Qe.Z,{attrs:{color:"primary",scrollable:""},model:{value:t.formData.data.startDate,callback:function(e){t.$set(t.formData.data,"startDate",e)},expression:"formData.data.startDate"}},[e(A.Z),e(b.Z,{attrs:{text:"",color:"primary"},on:{click:function(e){t.modalStart=!1}}},[t._v(" Cancel ")]),e(b.Z,{attrs:{text:"",color:"primary"},on:{click:function(e){return t.$refs.dialogStart.save(t.formData.data.startDate)}}},[t._v(" OK ")])],1)],1),e(st.Z,{ref:"dialogFinal",attrs:{"return-value":t.formData.data.finalDate,persistent:"",width:"290px"},on:{"update:returnValue":function(e){return t.$set(t.formData.data,"finalDate",e)},"update:return-value":function(e){return t.$set(t.formData.data,"finalDate",e)}},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:r}){return[e(ot.Z,t._g(t._b({attrs:{label:"Fecha de fin:","prepend-icon":"mdi-calendar",rules:t.empty,readonly:"",outlined:"",clearable:""},model:{value:t.formData.data.finalDate,callback:function(e){t.$set(t.formData.data,"finalDate",e)},expression:"formData.data.finalDate"}},"v-text-field",r,!1),a))]}}]),model:{value:t.modalFinal,callback:function(e){t.modalFinal=e},expression:"modalFinal"}},[e(Qe.Z,{attrs:{color:"primary",scrollable:""},model:{value:t.formData.data.finalDate,callback:function(e){t.$set(t.formData.data,"finalDate",e)},expression:"formData.data.finalDate"}},[e(A.Z),e(b.Z,{attrs:{text:"",color:"primary"},on:{click:function(e){t.modalFinal=!1}}},[t._v(" Cancel ")]),e(b.Z,{attrs:{text:"",color:"primary"},on:{click:function(e){return t.$refs.dialogFinal.save(t.formData.data.finalDate)}}},[t._v(" OK ")])],1)],1),e(ot.Z,{attrs:{label:"Costo de Matrícula","prepend-icon":"mdi-cash-multiple",type:"number",rules:t.empty,outlined:"",clearable:"",required:""},model:{value:t.formData.data.enrollCost,callback:function(e){t.$set(t.formData.data,"enrollCost",e)},expression:"formData.data.enrollCost"}}),e(ot.Z,{attrs:{label:"Costo de Pensión","prepend-icon":"mdi-cash-multiple",type:"number",rules:t.empty,outlined:"",clearable:"",required:""},model:{value:t.formData.data.pensionCost,callback:function(e){t.$set(t.formData.data,"pensionCost",e)},expression:"formData.data.pensionCost"}}),0!=t.itemsCheckbox.length?e("h2",[t._v("Especialidades:")]):e("h2",{staticClass:"text-center"},[t._v(" No hay especialidades disponibles ")]),t._l(t.itemsCheckbox,(function(a,r){return e(Za.Z,{key:r,attrs:{label:a.text,value:a.value,"hide-details":""},model:{value:t.formData.allSpecialityId,callback:function(e){t.$set(t.formData,"allSpecialityId",e)},expression:"formData.allSpecialityId"}})}))],2)],1)],1),e(q.h7,[e(A.Z),e(b.Z,{attrs:{color:"error",text:""},on:{click:function(e){t.dialogAdd=!1}}},[e("b",[t._v("Cerrar")])]),e(b.Z,{attrs:{color:"success",text:""},on:{click:function(e){return t.addSpecialty()}}},[e("b",[t._v("Enviar")])])],1)],1)],1)},_a=[],Da={name:"SpecialtyTableAdd",components:{MessageError:ft},data(){return{modalStart:!1,modalFinal:!1,dialogAdd:!1,itemsCheckbox:[],empty:[t=>(t||"").length>0||"Este campo es requerido"],formData:{allSpecialityId:[],data:{finalDate:"",startDate:"",enrollCost:0,pensionCost:0}}}},created(){},methods:{async getItemsList(){await this.$axios.get("/academic-cicle/"+this.$route.params.idCycle+"/not-speciality",{headers:{Authorization:`Bearer ${localStorage.token}`}}).then((t=>{this.itemsCheckbox=t.data})).catch((t=>{this.$queryError(t)}))},async addSpecialty(){await this.$axios.post("/academic-cicle/"+this.$route.params.idCycle+"/speciality/multiple-register",this.formData,{headers:{Authorization:`Bearer ${localStorage.token}`}}).then((t=>{this.dialogAdd=!1,this.$emit("loadTable"),this.$toast.success(t.data.content)})).catch((t=>{this.$queryError(t),this.$refs.messageError.showAlertError(t.response.data.content)}))},startDialog(){this.getItemsList(),this.formData={allSpecialityId:[],data:{finalDate:"",startDate:"",enrollCost:0,pensionCost:0}},this.itemsCheckbox=[],this.$nextTick((()=>{this.$refs.messageError&&this.$refs.messageError.hideAlertError()}))}}},ka=Da,Ca=(0,o.Z)(ka,xa,_a,!1,null,null,null),Ea=Ca.exports,Pa={name:"SpecialtyMain",components:{TableSpecialty:ba,TableAdd:Ea},data(){return{itemsRouter:[{text:"Ciclo",disabled:!1,to:"/cycle"},{text:"Especialidad",disabled:!0}]}},methods:{goToCycle(){Qr.push({name:"cycle"})},loadTable(){this.$refs.tableData.loadTable()}}},Sa=Pa,wa=(0,o.Z)(Sa,Ge,He,!1,null,null,null),$a=wa.exports,Aa=function(){var t=this,e=t._self._c;return e(x.Z,{staticClass:"max-width-container",attrs:{fluid:""}},[e(Z.Z,{staticClass:"rounded-lg"},[e(q.EB,{staticClass:"display-1 primary--text"},[e("b",[t._v("ESTUDIANTES")]),e(A.Z)],1),e(q.ZB,[e(Z.Z,[e(x.Z,[e("p",[e("b",[t._v("Filtro para la tabla de estudiantes:")])]),e(F.Z,{staticClass:"mb-0"},[e(Ft.Z,{attrs:{cols:"12",lg:"5",md:"5",xs:"12"}},[e(Ie.Z,{attrs:{items:t.dataCycle,"item-text":"name","item-value":"value",label:"Ciclo:","prepend-icon":"mdi-archive","hide-details":"",outlined:"",dense:""},on:{change:function(e){return t.getDataSpecialty()}},model:{value:t.selectedCycle,callback:function(e){t.selectedCycle=e},expression:"selectedCycle"}})],1),e(Ft.Z,{attrs:{cols:"12",lg:"5",md:"5",xs:"12"}},[e(Ie.Z,{attrs:{items:t.dataSpecialty,"item-text":"name","item-value":"value",label:"Especialidad:","prepend-icon":"mdi-archive","hide-details":"",outlined:"",dense:""},model:{value:t.selectedSpecialty,callback:function(e){t.selectedSpecialty=e},expression:"selectedSpecialty"}})],1),e(Ft.Z,{attrs:{cols:"12",lg:"2",md:"2",xs:"12"}},[e(b.Z,{attrs:{color:"primary",block:""},on:{click:function(e){return t.$refs.tableData.loadTable()}}},[e("b",[t._v("Filtrar")])])],1)],1)],1)],1),e("TableStudents",{ref:"tableData",attrs:{idCycle:t.selectedCycle,idSpecialty:t.selectedSpecialty}})],1)],1)],1)},Ia=[],Ta=function(){var t=this,e=t._self._c;return e("div",[e(et.Z,{staticClass:"elevation-1 mt-3 rounded-lg",attrs:{headers:t.headers,items:t.desserts},scopedSlots:t._u([{key:"item.index",fn:function({item:a}){return[e("b",[t._v(t._s(t.getIndex(a)))])]}},{key:"item.cui",fn:function({item:a}){return[null!=a.person.cui?e("div",[t._v(" "+t._s(a.person.cui)+" ")]):e("div",[e(tt.Z,{attrs:{color:"error",outlined:""}},[t._v(" Vacío ")])],1)]}},{key:"item.name",fn:function({item:e}){return[t._v(" "+t._s(e.person.lastnameFather+" "+e.person.lastnameMother+", "+e.person.name)+" ")]}},{key:"item.payments",fn:function({item:t}){return[e("PaymentsInformation",{attrs:{dataStudent:t}})]}},{key:"item.edit",fn:function({item:a}){return[e("StudentsEdit",{attrs:{dataStudent:a},on:{loadTable:function(e){return t.loadTable()}}})]}}])})],1)},Ma=[],Ra=function(){var t=this,e=t._self._c;return e(st.Z,{attrs:{"max-width":"600px"},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:r}){return[e(ee.Z,[e(tt.Z,t._g(t._b({attrs:{color:"info"},on:{click:function(e){return t.loadPaymentDetail()}}},"v-chip",r,!1),a),[e("b",[t._v(t._s(t.dataStudent.paymentCount.count+"/"+t.dataStudent.paymentCount.total))])])],1)]}}]),model:{value:t.dialogData,callback:function(e){t.dialogData=e},expression:"dialogData"}},[e(Z.Z,{staticClass:"rounded-lg"},[e(q.EB,{staticClass:"primary"},[e("span",{staticClass:"text-h5 white--text"},[t._v("Información detallada de Pagos")])]),e(q.ZB,[e(x.Z,[e(et.Z,{staticClass:"elevation-1 mt-3 rounded-lg",attrs:{headers:t.headers,items:t.enrollment,"hide-default-footer":""},scopedSlots:t._u([{key:"item.amount",fn:function({item:e}){return[t._v(" "+t._s("S/. "+e.cost)+" ")]}},{key:"item.state",fn:function({item:a}){return[e(tt.Z,{attrs:{color:a.status.color}},[e("b",[t._v(t._s(a.status.name))])])]}}])},[e("template",{slot:"item.value"},[t._v(" Matrícula ")])],2),e(et.Z,{staticClass:"elevation-1 mt-3 rounded-lg",attrs:{headers:t.headers2,items:t.pensions,"hide-default-footer":""},scopedSlots:t._u([{key:"item.value",fn:function({item:e}){return[t._v(" "+t._s("Pensión "+e.order)+" ")]}},{key:"item.amount",fn:function({item:e}){return[t._v(" "+t._s("S/. "+e.cost)+" ")]}},{key:"item.state",fn:function({item:a}){return[e(tt.Z,{attrs:{color:a.status.color}},[e("b",[t._v(t._s(a.status.name))])])]}}])})],1)],1),e(q.h7,[e(A.Z),e(b.Z,{attrs:{color:"success",text:""},on:{click:function(e){t.dialogData=!1}}},[e("b",[t._v("Volver")])])],1)],1)],1)},Ba=[],Oa={name:"StudentsPaymentsInformation",props:["dataStudent"],data(){return{dialogData:!1,enrollment:[],pensions:[],headers:[{text:"Concepto",value:"value"},{text:"Monto",value:"amount"},{text:"Estado",value:"state"}],headers2:[{text:"Concepto",value:"value"},{text:"Monto",value:"amount"},{text:"Estado",value:"state"}]}},created(){},methods:{async loadPaymentDetail(){await this.$axios.get("/enrollment-speciality/"+this.dataStudent.id+"/payment-detail",{headers:{Authorization:`Bearer ${localStorage.token}`}}).then((t=>{this.enrollment=[t.data.detailEnroll],this.pensions=t.data.allDetailPension})).catch((t=>{this.$queryError(t)}))}}},qa=Oa,Na=(0,o.Z)(qa,Ra,Ba,!1,null,null,null),Fa=Na.exports,Va=function(){var t=this,e=t._self._c;return e(st.Z,{attrs:{persistent:"","max-width":"600px"},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:r}){return[e(b.Z,t._g(t._b({attrs:{fab:"","x-small":"",color:"warning"},on:{click:function(e){return t.getDataStudent()}}},"v-btn",r,!1),a),[e(D.Z,[t._v(" mdi-pencil ")])],1)]}}]),model:{value:t.dialogEdit,callback:function(e){t.dialogEdit=e},expression:"dialogEdit"}},[e(Z.Z,{staticClass:"rounded-lg"},[e(q.EB,{staticClass:"primary"},[e("span",{staticClass:"text-h5 white--text"},[t._v("Editar Estudiante")])]),e(q.ZB,{staticClass:"mt-5"},[e(x.Z,[e(nt.Z,[e(ot.Z,{attrs:{label:"Apellido Paterno",type:"text",outlined:"",clearable:"",required:""},model:{value:t.formData.lastnameFather,callback:function(e){t.$set(t.formData,"lastnameFather",e)},expression:"formData.lastnameFather"}}),e(ot.Z,{attrs:{label:"Apellido Materno",type:"text",outlined:"",clearable:"",required:""},model:{value:t.formData.lastnameMother,callback:function(e){t.$set(t.formData,"lastnameMother",e)},expression:"formData.lastnameMother"}}),e(ot.Z,{attrs:{label:"Nombres",type:"text",outlined:"",clearable:"",required:""},model:{value:t.formData.name,callback:function(e){t.$set(t.formData,"name",e)},expression:"formData.name"}}),e(ot.Z,{attrs:{label:"CUI",type:"number",outlined:"",clearable:"",required:""},model:{value:t.formData.cui,callback:function(e){t.$set(t.formData,"cui",e)},expression:"formData.cui"}}),e(ot.Z,{attrs:{label:"Correo",type:"text",outlined:"",clearable:"",required:""},model:{value:t.formData.email,callback:function(e){t.$set(t.formData,"email",e)},expression:"formData.email"}}),e(ot.Z,{attrs:{label:"Celular",type:"number",outlined:"",clearable:"",required:""},model:{value:t.formData.phone,callback:function(e){t.$set(t.formData,"phone",e)},expression:"formData.phone"}})],1)],1)],1),e(q.h7,[e(A.Z),e(b.Z,{attrs:{color:"error",text:""},on:{click:function(e){t.dialogEdit=!1}}},[e("b",[t._v("Cancelar")])]),e(b.Z,{attrs:{color:"success",text:""},on:{click:function(e){return t.updateStudent()}}},[e("b",[t._v("Actualizar")])])],1)],1)],1)},za=[],La={name:"StudentsTableEdit",props:["dataStudent"],data(){return{dialogEdit:!1,formData:{cui:0,email:"",lastnameFather:"",lastnameMother:"",name:"",phone:0}}},created(){},methods:{getDataStudent(){this.formData.cui=this.dataStudent.person.cui,this.formData.email=this.dataStudent.person.email,this.formData.lastnameFather=this.dataStudent.person.lastnameFather,this.formData.lastnameMother=this.dataStudent.person.lastnameMother,this.formData.name=this.dataStudent.person.name,this.formData.phone=this.dataStudent.person.phone},async updateStudent(){await this.$axios.put("/person/"+this.dataStudent.person.dni+"/modify-info",this.formData,{headers:{Authorization:`Bearer ${localStorage.token}`}}).then((t=>{this.dialogEdit=!1,this.$emit("loadTable"),this.$toast.success(t.data.content)})).catch((t=>{this.$queryError(t)}))}}},ja=La,Ua=(0,o.Z)(ja,Va,za,!1,null,null,null),Ga=Ua.exports,Ha={name:"TableStudents",components:{PaymentsInformation:Fa,StudentsEdit:Ga},props:["idCycle","idSpecialty"],data(){return{headers:[{text:"#",align:"start",sortable:!1,value:"index"},{text:"Nombres",value:"name"},{text:"Pagos",value:"payments"},{text:"DNI",value:"person.dni"},{text:"CUI",value:"cui"},{text:"Celular",value:"person.phone"},{text:"Correo",value:"person.email"},{text:"Editar",value:"edit"}],desserts:[]}},created(){},methods:{async loadTable(){await this.$axios.get("/academic-cicle/"+this.idCycle+"/speciality/"+this.idSpecialty+"/enroll?perPage=100",{headers:{Authorization:`Bearer ${localStorage.token}`}}).then((t=>{this.desserts=t.data.allItems})).catch((t=>{this.$queryError(t),this.$toast.error(t.response.data.content)}))},clearTable(){this.desserts=[]},getIndex(t){const e=this.desserts.indexOf(t);return e+1}}},Ja=Ha,Ka=(0,o.Z)(Ja,Ta,Ma,!1,null,null,null),Qa=Ka.exports,Wa={name:"StudentsMain",components:{TableStudents:Qa},data(){return{selectedCycle:"",selectedSpecialty:"",disabledSpecialty:!0,dataCycle:[],dataSpecialty:[]}},created(){this.getDataCycle()},methods:{async getDataCycle(){this.dataCycle=[],await this.$axios.get("/academic-cicle",{headers:{Authorization:`Bearer ${localStorage.token}`}}).then((t=>{for(let e=0;e<t.data.allItems.length;e++){const a={name:t.data.allItems[e].year+" - "+t.data.allItems[e].name,value:t.data.allItems[e].id};this.dataCycle.push(a)}})).catch((t=>{this.$queryError(t),console.log(t)}))},async getDataSpecialty(){this.$refs.tableData.clearTable(),this.selectedSpecialty="",this.dataSpecialty=[],await this.$axios.get("/academic-cicle/"+this.selectedCycle+"/speciality",{headers:{Authorization:`Bearer ${localStorage.token}`}}).then((t=>{for(let e=0;e<t.data.allItems.length;e++){const a={name:t.data.allItems[e].name,value:t.data.allItems[e].id};this.dataSpecialty.push(a)}this.disabledSpecialty=!1})).catch((t=>{this.$queryError(t),console.log(t)}))}}},Xa=Wa,Ya=(0,o.Z)(Xa,Aa,Ia,!1,null,null,null),tr=Ya.exports,er=function(){var t=this,e=t._self._c;return e("div",[t.loader?e("loader",{ref:"loader",attrs:{object:"white",size:"10",speed:"1",bg:"#343a40",opacity:"30",name:"dots"}}):t._e(),e(x.Z,{staticClass:"max-width-container",attrs:{fluid:""}},[e(Z.Z,{staticClass:"rounded-lg"},[e(q.EB,{staticClass:"display-1 primary--text"},[e("b",[t._v("REVISIÓN DE PAGO")]),e(A.Z)],1),e(q.ZB,[null!=t.dataPayment.specialityOpening?e(x.Z,[e(ct.Z,{attrs:{border:"left",color:"primary",text:""}},[e("b",{staticClass:"text-left"},[t._v(t._s(t.dataPayment.specialityOpening.year)),e(D.Z,{attrs:{color:"primary"}},[t._v("mdi-arrow-right-thin")]),t._v(" "+t._s(" CICLO "+t.dataPayment.specialityOpening.cycleName)),e(D.Z,{attrs:{color:"primary"}},[t._v("mdi-arrow-right-thin")]),t._v(t._s(t.dataPayment.specialityOpening.specialityName))],1)]),e(F.Z,[e(Ft.Z,{attrs:{cols:"12",lg:"6",md:"6"}},[e("h2",[t._v("Imagen de Voucher")]),e("sendPaymentsImage",{attrs:{imageSrc:t.dataPayment.urlVoucher},on:{loadPayment:function(e){return t.loadPayment()}}}),null!=t.dataPayment.urlVoucher?e(N.Z,{staticClass:"zoom-image",attrs:{src:t.$axiosMinio+t.dataPayment.urlVoucher+`?t=${Date.now()}`,height:"450",contain:""},on:{mouseenter:function(e){t.isZoomed=!0},mouseleave:function(e){t.isZoomed=!1}}}):t._e()],1),e(Ft.Z,{attrs:{cols:"12",lg:"6",md:"6"}},[e(nt.Z,[e("h2",[t._v("Información del Voucher")]),e("sendPaymentsInformation",{attrs:{dataPayment:t.dataPayment},on:{loadPayment:function(e){return t.loadPayment()}}}),null!=t.dataPayment.person?e(ct.Z,{staticClass:"mt-5",attrs:{border:"left",color:"info",text:""}},[e(D.Z,{attrs:{color:"info"}},[t._v("mdi-account")]),t._v(t._s(t.dataPayment.person.lastnameFather+" "+t.dataPayment.person.lastnameMother+" "+t.dataPayment.person.name+" / "+t.dataPayment.person.email))],1):t._e(),e(ot.Z,{attrs:{label:"Fecha de pago",type:"date",readonly:t.stateReadOnly,required:""},model:{value:t.dataPayment.date,callback:function(e){t.$set(t.dataPayment,"date",e)},expression:"dataPayment.date"}}),e(ot.Z,{attrs:{label:"Banco",type:"text",readonly:t.stateReadOnly},model:{value:t.dataPayment.financialEntity.name,callback:function(e){t.$set(t.dataPayment.financialEntity,"name",e)},expression:"dataPayment.financialEntity.name"}}),e(ot.Z,{attrs:{label:"Número de operación",type:"text",readonly:t.stateReadOnly,required:""},model:{value:t.dataPayment.operatioNumber,callback:function(e){t.$set(t.dataPayment,"operatioNumber",e)},expression:"dataPayment.operatioNumber"}}),e(ot.Z,{attrs:{label:"Monto de Voucher",type:"text",readonly:t.stateReadOnly,required:""},model:{value:t.dataPayment.amount,callback:function(e){t.$set(t.dataPayment,"amount",e)},expression:"dataPayment.amount"}}),e("h2",{staticClass:"mb-3"},[t._v("Conceptos de Pago")]),e(ee.Z,{attrs:{"active-class":"primary--text",column:""}},[null!=t.dataPayment.payEnroll&&0!=t.dataPayment.payEnroll.amount?e(tt.Z,{attrs:{color:"success",outlined:""}},[e("b",[e(D.Z,{attrs:{left:""}},[t._v(" mdi-cash-multiple ")]),t._v(" "+t._s("Pago de Matrícula S/"+t.dataPayment.payEnroll.amount))],1)]):t._e(),null!=t.dataPayment.allPayPension?e("div",t._l(t.dataPayment.allPayPension,(function(a,r){return e(tt.Z,{key:r,attrs:{color:"info",outlined:""}},[e("b",[e(D.Z,{attrs:{left:""}},[t._v(" mdi-cash-multiple ")]),t._v(" "+t._s("Pago de Pensión "+a.reference+" S/"+a.amount))],1)])})),1):t._e()],1)],1)],1)],1),null!=t.dataPayment.allRemark?e("div",[0!=t.dataPayment.allRemark.length?e("div",[e("h2",{staticClass:"mt-3"},[t._v("Mensajes")]),t._l(t.dataPayment.allRemark,(function(a,r){return e(C.Z,{key:r,attrs:{"two-line":""}},[e(E.km,[e(E.V9,[t._v(t._s(a.content))]),e(E.oZ,[t._v(t._s(a.email))])],1),e(ae.Z,[t._v(t._s(a.moment.substring(0,10)+" / "+a.moment.substring(11,19)))])],1)})),e(_.Z)],2):e("div",[e("h3",[t._v("Sin mensajes")])])]):t._e()],1):t._e()],1),e(q.h7,[e(A.Z),e(b.Z,{attrs:{color:"error"},on:{click:function(e){return t.goToSendPayments()}}},[e("b",[t._v("Volver")])]),e(st.Z,{attrs:{persistent:"","max-width":"550"},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:r}){return[e(b.Z,t._g(t._b({staticClass:"ml-2",attrs:{color:"success"}},"v-btn",r,!1),a),[e("b",[t._v("Validar")])])]}}]),model:{value:t.dialogValidate,callback:function(e){t.dialogValidate=e},expression:"dialogValidate"}},[e(Z.Z,[e(q.EB,{staticClass:"text-h5"},[t._v(" ¿Esta seguro de validar el pago? ")]),e(q.ZB,[t._v("La información sera valida automáticamente.")]),e(q.h7,[e(A.Z),e(b.Z,{attrs:{color:"error",text:""},on:{click:function(e){t.dialogValidate=!1}}},[e("b",[t._v("Cancelar")])]),e(b.Z,{attrs:{color:"success",text:""},on:{click:function(e){return t.validatePayment()}}},[e("b",[t._v("Aceptar")])])],1)],1)],1)],1)],1)],1)],1)},ar=[],rr=a(757),sr=function(){var t=this,e=t._self._c;return e(st.Z,{attrs:{persistent:"","max-width":"600px"},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:r}){return[e(b.Z,t._g(t._b({attrs:{icon:""}},"v-btn",r,!1),a),[e(D.Z,[t._v("mdi-image-edit-outline")])],1)]}}]),model:{value:t.dialogEdit,callback:function(e){t.dialogEdit=e},expression:"dialogEdit"}},[e(Z.Z,{staticClass:"rounded-lg"},[e(q.EB,{staticClass:"primary"},[e("span",{staticClass:"text-h5 white--text"},[t._v("Editar Voucher")])]),e(q.ZB,{staticClass:"mt-5"},[e(x.Z,[e("cropper",{ref:"cropper",staticClass:"cropper",attrs:{src:t.img+`?t=${Date.now()}`}}),e(rr.Z,{attrs:{dark:""}},[e(b.Z,{on:{click:function(e){return t.rotate(-90)}}},[e(D.Z,[t._v("mdi-rotate-left")])],1),e(b.Z,{on:{click:function(e){return t.rotate(90)}}},[e(D.Z,[t._v("mdi-rotate-right")])],1)],1)],1)],1),e(q.h7,[e(A.Z),e(b.Z,{attrs:{color:"error",text:""},on:{click:function(e){t.dialogEdit=!1}}},[e("b",[t._v("Cancelar")])]),e(b.Z,{attrs:{color:"success",text:""},on:{click:function(e){return t.updateFile()}}},[e("b",[t._v("Actualizar")])])],1)],1)],1)},nr=[],or=a(516),ir={name:"SendPaymentsImage",props:["imageSrc"],components:{Cropper:or.fl},data(){return{dialogEdit:!1,img:this.$axiosMinio+this.imageSrc}},created(){},methods:{rotate(t){this.$refs.cropper.rotate(t)},updateFile(){const{canvas:t}=this.$refs.cropper.getResult();if(t){const e=new FormData;t.toBlob((t=>{e.append("file",t),this.$axiosFile.post("/storage/update/"+this.imageSrc,e,{headers:{Authorization:`Bearer ${localStorage.token}`,"Content-Type":"multipart/form-data"}}).then((t=>{this.$emit("loadPayment"),this.dialogEdit=!1,this.$toast.success(t.data.content)})).catch((t=>{this.$queryError(t)}))}),"image/jpg")}}}},lr=ir,cr=(0,o.Z)(lr,sr,nr,!1,null,null,null),dr=cr.exports,ur=function(){var t=this,e=t._self._c;return e(st.Z,{attrs:{persistent:"","max-width":"600px"},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:r}){return[e(b.Z,t._g(t._b({attrs:{icon:""},on:{click:function(e){return t.getDataPayment()}}},"v-btn",r,!1),a),[e(D.Z,[t._v("mdi-image-edit-outline")])],1)]}}]),model:{value:t.dialogEdit,callback:function(e){t.dialogEdit=e},expression:"dialogEdit"}},[e(Z.Z,{staticClass:"rounded-lg"},[e(q.EB,{staticClass:"primary"},[e("span",{staticClass:"text-h5 white--text"},[t._v("Editar Datos Vaucher")])]),e(q.ZB,{staticClass:"mt-5"},[e(x.Z,[e(ot.Z,{staticClass:"mt-5",attrs:{rules:t.empty,"error-messages":t.formData.date?"":"Campo requerido",label:"Ingrese Fecha de pago",type:"date","background-color":"white",outlined:"",clearable:"",required:""},model:{value:t.formData.date,callback:function(e){t.$set(t.formData,"date",e)},expression:"formData.date"}}),e(Ie.Z,{attrs:{rules:t.empty,"error-messages":t.formData.financialEntityId?"":"Campo requerido",items:t.entities,"item-text":"text","item-value":"value",label:"Seleccione Banco","background-color":"white",outlined:"",chips:"","small-chips":""},model:{value:t.formData.financialEntityId,callback:function(e){t.$set(t.formData,"financialEntityId",e)},expression:"formData.financialEntityId"}}),e(ot.Z,{attrs:{rules:t.empty,"error-messages":t.formData.operationNumber?"":"Campo requerido",label:"Número de operación",type:"number","background-color":"white",outlined:"",clearable:"",required:""},model:{value:t.formData.operationNumber,callback:function(e){t.$set(t.formData,"operationNumber",e)},expression:"formData.operationNumber"}})],1)],1),e(q.h7,[e(A.Z),e(b.Z,{attrs:{color:"error",text:""},on:{click:function(e){t.dialogEdit=!1}}},[e("b",[t._v("Cancelar")])]),e(b.Z,{attrs:{color:"success",text:""},on:{click:function(e){return t.updateDataPayment()}}},[e("b",[t._v("Actualizar")])])],1)],1)],1)},mr=[],pr={name:"SendPaymentsInformation",props:["dataPayment"],data(){return{dialogEdit:!1,entities:[],empty:[t=>!!t||"Campo requerido"],formData:{}}},created(){this.getEntities()},methods:{async getEntities(){await this.$axios.get("/financial-entity",{headers:{Authorization:`Bearer ${localStorage.token}`}}).then((t=>{this.entities=t.data})).catch((t=>{this.$queryError(t)}))},getDataPayment(){this.formData={date:this.dataPayment.date,financialEntityId:this.dataPayment.financialEntity.id,operationNumber:this.dataPayment.operatioNumber}},async updateDataPayment(){await this.$axios.put("/requisition-pay/"+this.dataPayment.id,this.formData,{headers:{Authorization:`Bearer ${localStorage.token}`}}).then((t=>{this.$emit("loadPayment"),this.dialogEdit=!1,this.$toast.success(t.data.content)})).catch((t=>{this.$queryError(t)}))}}},hr=pr,fr=(0,o.Z)(hr,ur,mr,!1,null,null,null),yr=fr.exports,gr={name:"SentPaymentsValidate",components:{sendPaymentsImage:dr,sendPaymentsInformation:yr},data(){return{dataPayment:{},stateReadOnly:!0,dialogValidate:!1,loader:!1,isZoomed:!1}},created(){this.loadPayment()},methods:{async loadPayment(){await this.$axios.get("/requisition-pay/"+this.$route.params.idPayment+"/sent",{headers:{Authorization:`Bearer ${localStorage.token}`}}).then((t=>{this.dataPayment=t.data})).catch((t=>{this.$queryError(t)}))},goToSendPayments(){Qr.push({name:"sentPayments"})},async validatePayment(){this.loader=!0,await this.$axios.put("/requisition-pay/"+this.$route.params.idPayment+"/validate",{},{headers:{Authorization:`Bearer ${localStorage.token}`}}).then((()=>{this.$toast.success("Se ha validado correctamente el pago"),Qr.push({name:"sentPayments"})})).catch((t=>{this.dialogValidate=!1,this.$queryError(t)}))}}},vr=gr,br=(0,o.Z)(vr,er,ar,!1,null,null,null),Zr=br.exports,xr=function(){var t=this,e=t._self._c;return e(x.Z,{staticClass:"max-width-container",attrs:{fluid:""}},[e(Z.Z,{staticClass:"rounded-lg"},[e(q.EB,{staticClass:"display-1 primary--text"},[e("b",[t._v("FINANZAS")]),e(A.Z)],1),e(q.ZB,[e(Z.Z,[e(x.Z,[e("p",[e("b",[t._v("Filtro de fechas para movimientos financieros")])]),e(F.Z,{staticClass:"mb-0"},[e(Ft.Z,{attrs:{cols:"12",lg:"5",md:"5",xs:"12"}},[e(ot.Z,{attrs:{label:"Fecha Inicio",type:"date","hide-details":"",outlined:"",dense:""},model:{value:t.startDate,callback:function(e){t.startDate=e},expression:"startDate"}})],1),e(Ft.Z,{attrs:{cols:"12",lg:"5",md:"5",xs:"12"}},[e(ot.Z,{attrs:{disabled:""==t.startDate,label:"Fecha Fin",type:"date","hide-details":"",outlined:"",dense:""},model:{value:t.endDate,callback:function(e){t.endDate=e},expression:"endDate"}})],1),e(Ft.Z,{attrs:{cols:"12",lg:"2",md:"2",xs:"12"}},[e(b.Z,{attrs:{color:"primary",block:""},on:{click:function(e){t.$refs.financeTable.loadTable(),t.$refs.financeTable.getTotal()}}},[e("b",[t._v("Filtrar")])])],1)],1)],1)],1),e("FinanceTable",{ref:"financeTable",attrs:{startDate:t.startDate,endDate:t.endDate}}),e("ExportExcel")],1)],1)],1)},_r=[],Dr=function(){var t=this,e=t._self._c;return e("div",[0!=t.amount?e(ct.Z,{staticClass:"mt-4",attrs:{type:"success",text:"",dense:""}},[t._v(t._s("Monto Total: ")),e("b",[t._v(t._s("S/. "+t.amount))])]):e(ct.Z,{staticClass:"mt-4",attrs:{type:"info",text:"",dense:""}},[e("b",[t._v(t._s("No hay datos en el rango de fechas"))])]),e(et.Z,{staticClass:"elevation-1 rounded-lg",attrs:{headers:t.headers,items:t.desserts},scopedSlots:t._u([{key:"item.index",fn:function({item:a}){return[e("b",[t._v(t._s(t.getIndex(a)))])]}},{key:"item.amount",fn:function({item:a}){return[e(tt.Z,{attrs:{color:"success"}},[e(D.Z,{attrs:{left:""}},[t._v(" mdi-cash ")]),e("b",[t._v(t._s("S/. "+a.amount))])],1)]}},{key:"item.date",fn:function({item:a}){return[e(tt.Z,{attrs:{color:"info",outlined:""}},[e(D.Z,{attrs:{left:""}},[t._v(" mdi-calendar-range ")]),t._v(t._s(a.registrationMoment.substring(0,10))+" ")],1)]}},{key:"item.hour",fn:function({item:a}){return[e(tt.Z,{attrs:{color:"blue-grey darken-2",outlined:""}},[e(D.Z,{attrs:{left:""}},[t._v(" mdi-timer-outline ")]),t._v(" "+t._s(a.registrationMoment.substring(11,19))+" ")],1)]}}])})],1)},kr=[],Cr={name:"TableStudents",props:["startDate","endDate"],data(){return{headers:[{text:"#",align:"start",sortable:!1,value:"index"},{text:"Monto",value:"amount"},{text:"Fecha de Validación",value:"date"},{text:"Hora de Validación",value:"hour"}],desserts:[],amount:0}},created(){this.loadTable(),this.getTotal()},methods:{async loadTable(){await this.$axios.get("/financial-income/list?startDate="+this.startDate+"&endDate="+this.endDate,{headers:{Authorization:`Bearer ${localStorage.token}`}}).then((t=>{this.desserts=t.data.allItems})).catch((t=>{this.desserts=[],this.$queryError(t)}))},async getTotal(){await this.$axios.get("/financial-income/total?startDate="+this.startDate+"&endDate="+this.endDate,{headers:{Authorization:`Bearer ${localStorage.token}`}}).then((t=>{this.amount=t.data.content})).catch((()=>{this.amount=0}))},getIndex(t){const e=this.desserts.indexOf(t);return e+1}}},Er=Cr,Pr=(0,o.Z)(Er,Dr,kr,!1,null,null,null),Sr=Pr.exports,wr=function(){var t=this,e=t._self._c;return e(st.Z,{attrs:{persistent:"","max-width":"600px"},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:r}){return[e(b.Z,t._g(t._b({staticClass:"mt-3",attrs:{color:"primary",block:""}},"v-btn",r,!1),a),[e("b",[t._v("Descarga de Pagos")])])]}}]),model:{value:t.dialogExport,callback:function(e){t.dialogExport=e},expression:"dialogExport"}},[e(Z.Z,{staticClass:"rounded-lg"},[e(q.EB,{staticClass:"primary"},[e("span",{staticClass:"text-h5 white--text"},[t._v("Descarga Excel")])]),e(q.ZB,{staticClass:"mt-5"},[e(x.Z,[e(nt.Z,[e(ot.Z,{attrs:{label:"Fecha de inicio",type:"date",outlined:"",clearable:"",required:""},model:{value:t.startDate,callback:function(e){t.startDate=e},expression:"startDate"}}),e(ot.Z,{attrs:{label:"Fecha de fin",type:"date",outlined:"",clearable:"",required:""},model:{value:t.endDate,callback:function(e){t.endDate=e},expression:"endDate"}})],1)],1)],1),e(q.h7,[e(A.Z),e(b.Z,{attrs:{color:"error",text:""},on:{click:function(e){t.dialogExport=!1}}},[e("b",[t._v("Cerrar")])]),e(b.Z,{attrs:{color:"success",text:"",disabled:null==t.startDate||null==t.endDate},on:{click:function(e){return t.exportExcel()}}},[e(D.Z,{attrs:{left:""}},[t._v(" mdi-file-excel ")]),e("b",[t._v("Excel")])],1),e(b.Z,{attrs:{color:"info",text:"",disabled:null==t.startDate||null==t.endDate},on:{click:function(e){return t.exportPdf()}}},[e(D.Z,{attrs:{left:""}},[t._v(" mdi-file-pdf-box ")]),e("b",[t._v("Pdf")])],1)],1)],1)],1)},$r=[],Ar=a(3162),Ir=a(4730),Tr={name:"FinanceExportExcel",data(){return{dialogExport:!1,startDate:null,endDate:null}},created(){},methods:{async exportExcel(){await this.$axios.get("/report/pays-csv?startDate="+this.startDate+"&endDate="+this.endDate,{headers:{Authorization:`Bearer ${localStorage.token}`}}).then((t=>{if(0==t.data.length)this.$toast.error("No hay datos en el rango de fechas");else{const e=ua.P6.book_new(),a=ua.P6.json_to_sheet(t.data);a["A1"].v="PATERNO",a["B1"].v="MATERNO",a["C1"].v="NOMBRES",a["D1"].v="CUI",a["E1"].v="CONCEPTO",a["F1"].v="MONTO",a["G1"].v="NUMERO OPERACION",a["H1"].v="FECHA DE PAGO",a["I1"].v="CORREO",a["J1"].v="ESPECIALIDAD",ua.P6.book_append_sheet(e,a,"Pagos");const r=(0,ua.cW)(e,{bookType:"xlsx",type:"array"}),s=new Blob([r],{type:"application/octet-stream"});(0,Ar.saveAs)(s,"Relación de Pagos CSV "+this.startDate+" al "+this.endDate+".xlsx"),this.dialogExport=!1}})).catch((t=>{this.$queryError(t)}))},async exportPdf(){await this.$axios.get("/report/pays-pdf?startDate="+this.startDate+"&endDate="+this.endDate,{headers:{Authorization:`Bearer ${localStorage.token}`}}).then((t=>{if(0==t.data.length)this.$toast.error("No hay datos en el rango de fechas");else{const e=t.data,a=new Ir.ZP({orientation:"landscape"});a.setFontSize(8);for(let t=0;t<e.length;t++)0!==t&&a.addPage(),a.text(e[t].specialityName,10,10),a.text(e[t].personLastnameFather+" "+e[t].personLastnameMother+", "+e[t].personName,10,20),a.addImage(this.$axiosMinio+e[t].requisitionPayUrlVoucher,"JPEG",10,30,135,170),t++,t!=e.length&&(a.text(e[t].specialityName,153,10),a.text(e[t].personLastnameFather+" "+e[t].personLastnameMother+", "+e[t].personName,153,20),a.addImage(this.$axiosMinio+e[t].requisitionPayUrlVoucher,"JPEG",153,30,135,170));a.save("Relación de Pagos PDF "+this.startDate+" al "+this.endDate+".xlsx")}})).catch((t=>{this.$queryError(t)}))}}},Mr=Tr,Rr=(0,o.Z)(Mr,wr,$r,!1,null,null,null),Br=Rr.exports,Or={name:"FinanceMain",components:{FinanceTable:Sr,ExportExcel:Br},data(){return{startDate:"",endDate:""}},created(){},methods:{}},qr=Or,Nr=(0,o.Z)(qr,xr,_r,!1,null,null,null),Fr=Nr.exports,Vr=function(){var t=this,e=t._self._c;return e("div",[e(x.Z,{attrs:{fluid:"","fill-height":""}},[e(F.Z,{attrs:{align:"center",justify:"center"}},[e(Ft.Z,{staticClass:"text-center",attrs:{cols:"12"}},[e("h1",{staticClass:"display-1"},[t._v("Error de autenticación")]),e("p",[t._v("Lo sentimos, no tienes permiso para acceder a esta página.")])])],1)],1)],1)},zr=[],Lr={name:"ErrorMessage",data(){return{}},created(){setTimeout((()=>{this.routerLogin()}),3500)},methods:{routerLogin(){Qr.push({name:"login"})}}},jr=Lr,Ur=(0,o.Z)(jr,Vr,zr,!1,null,null,null),Gr=Ur.exports;r.ZP.use(p.ZP);const Hr=[{path:"/login",name:"login",beforeEnter:Jr,component:Jt},{path:"/",component:O,meta:{requiresAuth:!0},children:[{path:"",redirect:"dashboard"},{path:"cycle",name:"cycle",component:Nt},{path:"dashboard",name:"dashboard",component:Q},{path:"finance",name:"finance",component:Fr},{path:"myPayments",name:"myPayments",component:ye},{path:"payment",name:"payment",component:Ue},{path:"sentPayments",name:"sentPayments",component:Se},{path:"students",name:"students",component:tr},{path:"specialty/:yearCycle/:nameCycle/:idCycle",name:"specialty",component:$a},{path:"validate/:idPayment",name:"validate",component:Zr}]},{path:"/error",name:"errorMessage",component:Gr},{path:"*",redirect:"/"},{path:"/:catchAll(.*)",redirect:"/"}];function Jr(t,e,a){"true"===localStorage.getItem("authenticated")?a({name:"dashboard"}):a()}const Kr=new p.ZP({mode:"history",base:"/",routes:Hr});Kr.beforeEach(((t,e,a)=>{const r=t.matched.some((t=>t.meta.requiresAuth)),s="true"===localStorage.getItem("authenticated");r&&!s?a("/login"):a()}));var Qr=Kr,Wr=a(629);r.ZP.use(Wr.ZP);var Xr=new Wr.ZP.Store({state:{state:!1},mutations:{SET_STATE(t,e){t.nombre=e},logout(){localStorage.removeItem("token"),localStorage.removeItem("authenticated"),localStorage.removeItem("key"),localStorage.removeItem("information")}},actions:{},getters:{}}),Yr=a(6154),ts=a(1151),es=a(8385);r.ZP.use(es.Z),r.ZP.config.productionTip=!1,r.ZP.use(ts.ZP),r.ZP.prototype.$axios=Yr.Z.create({baseURL:"https://usefc.site/backend/controller/"}),r.ZP.prototype.$axiosFile=Yr.Z.create({baseURL:"https://usefc.site/backend/file/"}),r.ZP.prototype.$axiosMinio="https://usefc.site/bucket/payment/",r.ZP.prototype.$queryError=function(t){"undefined"===typeof t.response.data.status?this.$toast.error(t.response.data.content):(localStorage.removeItem("token"),localStorage.removeItem("authenticated"),localStorage.removeItem("key"),localStorage.removeItem("information"),Qr.push({name:"errorMessage"}))},new r.ZP({vuetify:m,router:Qr,store:Xr,render:t=>t(c)}).$mount("#app")}},e={};function a(r){var s=e[r];if(void 0!==s)return s.exports;var n=e[r]={exports:{}};return t[r].call(n.exports,n,n.exports,a),n.exports}a.m=t,function(){var t=[];a.O=function(e,r,s,n){if(!r){var o=1/0;for(d=0;d<t.length;d++){r=t[d][0],s=t[d][1],n=t[d][2];for(var i=!0,l=0;l<r.length;l++)(!1&n||o>=n)&&Object.keys(a.O).every((function(t){return a.O[t](r[l])}))?r.splice(l--,1):(i=!1,n<o&&(o=n));if(i){t.splice(d--,1);var c=s();void 0!==c&&(e=c)}}return e}n=n||0;for(var d=t.length;d>0&&t[d-1][2]>n;d--)t[d]=t[d-1];t[d]=[r,s,n]}}(),function(){a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,{a:e}),e}}(),function(){var t,e=Object.getPrototypeOf?function(t){return Object.getPrototypeOf(t)}:function(t){return t.__proto__};a.t=function(r,s){if(1&s&&(r=this(r)),8&s)return r;if("object"===typeof r&&r){if(4&s&&r.__esModule)return r;if(16&s&&"function"===typeof r.then)return r}var n=Object.create(null);a.r(n);var o={};t=t||[null,e({}),e([]),e(e)];for(var i=2&s&&r;"object"==typeof i&&!~t.indexOf(i);i=e(i))Object.getOwnPropertyNames(i).forEach((function(t){o[t]=function(){return r[t]}}));return o["default"]=function(){return r},a.d(n,o),n}}(),function(){a.d=function(t,e){for(var r in e)a.o(e,r)&&!a.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})}}(),function(){a.f={},a.e=function(t){return Promise.all(Object.keys(a.f).reduce((function(e,r){return a.f[r](t,e),e}),[]))}}(),function(){a.u=function(t){return"js/"+t+"."+{43:"484ee941",120:"bcc9b336",856:"cb1d9de0"}[t]+".js"}}(),function(){a.miniCssF=function(t){}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={},e="front_usefc:";a.l=function(r,s,n,o){if(t[r])t[r].push(s);else{var i,l;if(void 0!==n)for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var u=c[d];if(u.getAttribute("src")==r||u.getAttribute("data-webpack")==e+n){i=u;break}}i||(l=!0,i=document.createElement("script"),i.charset="utf-8",i.timeout=120,a.nc&&i.setAttribute("nonce",a.nc),i.setAttribute("data-webpack",e+n),i.src=r),t[r]=[s];var m=function(e,a){i.onerror=i.onload=null,clearTimeout(p);var s=t[r];if(delete t[r],i.parentNode&&i.parentNode.removeChild(i),s&&s.forEach((function(t){return t(a)})),e)return e(a)},p=setTimeout(m.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=m.bind(null,i.onerror),i.onload=m.bind(null,i.onload),l&&document.head.appendChild(i)}}}(),function(){a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){a.p="/"}(),function(){var t={143:0};a.f.j=function(e,r){var s=a.o(t,e)?t[e]:void 0;if(0!==s)if(s)r.push(s[2]);else{var n=new Promise((function(a,r){s=t[e]=[a,r]}));r.push(s[2]=n);var o=a.p+a.u(e),i=new Error,l=function(r){if(a.o(t,e)&&(s=t[e],0!==s&&(t[e]=void 0),s)){var n=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;i.message="Loading chunk "+e+" failed.\n("+n+": "+o+")",i.name="ChunkLoadError",i.type=n,i.request=o,s[1](i)}};a.l(o,l,"chunk-"+e,e)}},a.O.j=function(e){return 0===t[e]};var e=function(e,r){var s,n,o=r[0],i=r[1],l=r[2],c=0;if(o.some((function(e){return 0!==t[e]}))){for(s in i)a.o(i,s)&&(a.m[s]=i[s]);if(l)var d=l(a)}for(e&&e(r);c<o.length;c++)n=o[c],a.o(t,n)&&t[n]&&t[n][0](),t[n]=0;return a.O(d)},r=self["webpackChunkfront_usefc"]=self["webpackChunkfront_usefc"]||[];r.forEach(e.bind(null,0)),r.push=e.bind(null,r.push.bind(r))}();var r=a.O(void 0,[998],(function(){return a(889)}));r=a.O(r)})();
//# sourceMappingURL=app.c19d6d24.js.map